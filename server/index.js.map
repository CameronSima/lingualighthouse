{
  "version": 3,
  "sources": ["css-bundle-update-plugin-ns:/Users/cameronsima/dev/yt_search_remix/node_modules/@remix-run/css-bundle/dist/index.js", "../mocks/index.js", "../server.ts", "server-entry-module:@remix-run/dev/server-build", "../app/entry.server.tsx", "../app/root.tsx", "../app/session.server.ts", "../app/models/user.server.ts", "../app/routes/api.jobs.$channelId.$searchText.tsx", "../app/models/job.server.ts", "../app/routes/jobs.$channelId.$searchText.tsx", "../app/components/Spinner.tsx", "../app/routes/api.jobs.run.$channelId.tsx", "../app/models/channel.server.ts", "../app/s3.server.ts", "../app/transcript.server.ts", "../app/youtube.server.ts", "../app/models/video.server.ts", "../app/routes/notes.$noteId.tsx", "../app/models/note.server.ts", "../app/routes/notes._index.tsx", "../app/routes/notes.new.tsx", "../app/routes/account.tsx", "../app/models/search.server.ts", "../app/utils.ts", "../app/routes/channel.tsx", "../app/search.server.ts", "../app/routes/_index.tsx", "../app/routes/logout.tsx", "../app/routes/about.tsx", "../app/routes/login.tsx", "../app/routes/notes.tsx", "../app/routes/video.tsx", "../app/components/VideoContainer.tsx", "../app/context/videoContext.tsx", "../app/reducers/video.reducer.ts", "../app/hooks/playingAll.tsx", "../app/hooks/screenSize.tsx", "../app/constants.ts", "../app/components/ProgressBar.tsx", "../app/components/YoutubeVideo.tsx", "../app/hooks/emitVideoProgress.tsx", "../app/hooks/video.tsx", "../app/hooks/isInView.tsx", "../app/routes/join.tsx", "../cypress/support/test-routes/create-user.ts", "server-assets-manifest:@remix-run/dev/assets-manifest"],
  "sourcesContent": ["/**\n * @remix-run/css-bundle v1.18.1\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n// Injected by `cssBundlePlugin`\nlet cssBundleHref = typeof undefined === \"string\" ? undefined : undefined;\n\nexports.cssBundleHref = cssBundleHref;\n", "const { setupServer } = require(\"msw/node\");\n\nconst server = setupServer();\n\nserver.listen({ onUnhandledRequest: \"bypass\" });\n\nprocess.once(\"SIGINT\", () => server.close());\nprocess.once(\"SIGTERM\", () => server.close());\n", "import { createRequestHandler } from \"@remix-run/architect\";\nimport * as build from \"@remix-run/dev/server-build\";\n\nif (process.env.NODE_ENV !== \"production\") {\n  require(\"./mocks\");\n}\n\nexport const handler = createRequestHandler({\n  build,\n  mode: process.env.NODE_ENV,\n});\n", "\nimport * as entryServer from \"/Users/cameronsima/dev/yt_search_remix/app/entry.server.tsx\";\nimport * as route0 from \"./root.tsx\";\nimport * as route1 from \"./routes/api.jobs.$channelId.$searchText.tsx\";\nimport * as route2 from \"./routes/jobs.$channelId.$searchText.tsx\";\nimport * as route3 from \"./routes/api.jobs.run.$channelId.tsx\";\nimport * as route4 from \"./routes/notes.$noteId.tsx\";\nimport * as route5 from \"./routes/notes._index.tsx\";\nimport * as route6 from \"./routes/notes.new.tsx\";\nimport * as route7 from \"./routes/account.tsx\";\nimport * as route8 from \"./routes/channel.tsx\";\nimport * as route9 from \"./routes/_index.tsx\";\nimport * as route10 from \"./routes/logout.tsx\";\nimport * as route11 from \"./routes/about.tsx\";\nimport * as route12 from \"./routes/login.tsx\";\nimport * as route13 from \"./routes/notes.tsx\";\nimport * as route14 from \"./routes/video.tsx\";\nimport * as route15 from \"./routes/join.tsx\";\nimport * as route16 from \"./../cypress/support/test-routes/create-user.ts\";\n  export { default as assets } from \"@remix-run/dev/assets-manifest\";\n  export const assetsBuildDirectory = \"public/build\";\n  export const future = {\"v2_dev\":false,\"unstable_postcss\":false,\"unstable_tailwind\":false,\"v2_errorBoundary\":true,\"v2_headers\":true,\"v2_meta\":true,\"v2_normalizeFormMethod\":true,\"v2_routeConvention\":true};\n  export const publicPath = \"/_static/build/\";\n  export const entry = { module: entryServer };\n  \n  export const routes = {\n    \"root\": {\n      id: \"root\",\n      parentId: undefined,\n      path: \"\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route0\n    },\n  \"routes/api.jobs.$channelId.$searchText\": {\n      id: \"routes/api.jobs.$channelId.$searchText\",\n      parentId: \"root\",\n      path: \"api/jobs/:channelId/:searchText\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route1\n    },\n  \"routes/jobs.$channelId.$searchText\": {\n      id: \"routes/jobs.$channelId.$searchText\",\n      parentId: \"root\",\n      path: \"jobs/:channelId/:searchText\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route2\n    },\n  \"routes/api.jobs.run.$channelId\": {\n      id: \"routes/api.jobs.run.$channelId\",\n      parentId: \"root\",\n      path: \"api/jobs/run/:channelId\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route3\n    },\n  \"routes/notes.$noteId\": {\n      id: \"routes/notes.$noteId\",\n      parentId: \"routes/notes\",\n      path: \":noteId\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route4\n    },\n  \"routes/notes._index\": {\n      id: \"routes/notes._index\",\n      parentId: \"routes/notes\",\n      path: undefined,\n      index: true,\n      caseSensitive: undefined,\n      module: route5\n    },\n  \"routes/notes.new\": {\n      id: \"routes/notes.new\",\n      parentId: \"routes/notes\",\n      path: \"new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route6\n    },\n  \"routes/account\": {\n      id: \"routes/account\",\n      parentId: \"root\",\n      path: \"account\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route7\n    },\n  \"routes/channel\": {\n      id: \"routes/channel\",\n      parentId: \"root\",\n      path: \"channel\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route8\n    },\n  \"routes/_index\": {\n      id: \"routes/_index\",\n      parentId: \"root\",\n      path: undefined,\n      index: true,\n      caseSensitive: undefined,\n      module: route9\n    },\n  \"routes/logout\": {\n      id: \"routes/logout\",\n      parentId: \"root\",\n      path: \"logout\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route10\n    },\n  \"routes/about\": {\n      id: \"routes/about\",\n      parentId: \"root\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route11\n    },\n  \"routes/login\": {\n      id: \"routes/login\",\n      parentId: \"root\",\n      path: \"login\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route12\n    },\n  \"routes/notes\": {\n      id: \"routes/notes\",\n      parentId: \"root\",\n      path: \"notes\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route13\n    },\n  \"routes/video\": {\n      id: \"routes/video\",\n      parentId: \"root\",\n      path: \"video\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route14\n    },\n  \"routes/join\": {\n      id: \"routes/join\",\n      parentId: \"root\",\n      path: \"join\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route15\n    },\n  \"../cypress/support/test-routes/create-user\": {\n      id: \"../cypress/support/test-routes/create-user\",\n      parentId: \"root\",\n      path: \"__tests/create-user\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route16\n    }\n  };", "/**\n * By default, Remix will handle generating the HTTP Response for you.\n * You are free to delete this file if you'd like to, but if you ever want it revealed again, you can run `npx remix reveal` \u2728\n * For more information, see https://remix.run/file-conventions/entry.server\n */\n\nimport { PassThrough } from \"node:stream\";\n\nimport type { AppLoadContext, EntryContext } from \"@remix-run/node\";\nimport { Response } from \"@remix-run/node\";\nimport { RemixServer } from \"@remix-run/react\";\nimport isbot from \"isbot\";\nimport { renderToPipeableStream } from \"react-dom/server\";\n\nconst ABORT_DELAY = 600_000;\n\nexport default function handleRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext,\n  loadContext: AppLoadContext\n) {\n  return isbot(request.headers.get(\"user-agent\"))\n    ? handleBotRequest(\n        request,\n        responseStatusCode,\n        responseHeaders,\n        remixContext\n      )\n    : handleBrowserRequest(\n        request,\n        responseStatusCode,\n        responseHeaders,\n        remixContext\n      );\n}\n\nfunction handleBotRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext\n) {\n  return new Promise((resolve, reject) => {\n    let shellRendered = false;\n    const { pipe, abort } = renderToPipeableStream(\n      <RemixServer\n        context={remixContext}\n        url={request.url}\n        abortDelay={ABORT_DELAY}\n      />,\n      {\n        onAllReady() {\n          shellRendered = true;\n          const body = new PassThrough();\n\n          responseHeaders.set(\"Content-Type\", \"text/html\");\n\n          resolve(\n            new Response(body, {\n              headers: responseHeaders,\n              status: responseStatusCode,\n            })\n          );\n\n          pipe(body);\n        },\n        onShellError(error: unknown) {\n          reject(error);\n        },\n        onError(error: unknown) {\n          responseStatusCode = 500;\n          // Log streaming rendering errors from inside the shell.  Don't log\n          // errors encountered during initial shell rendering since they'll\n          // reject and get logged in handleDocumentRequest.\n          if (shellRendered) {\n            console.error(error);\n          }\n        },\n      }\n    );\n\n    setTimeout(abort, ABORT_DELAY);\n  });\n}\n\nfunction handleBrowserRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext\n) {\n  return new Promise((resolve, reject) => {\n    let shellRendered = false;\n    const { pipe, abort } = renderToPipeableStream(\n      <RemixServer\n        context={remixContext}\n        url={request.url}\n        abortDelay={ABORT_DELAY}\n      />,\n      {\n        onShellReady() {\n          shellRendered = true;\n          const body = new PassThrough();\n\n          responseHeaders.set(\"Content-Type\", \"text/html\");\n\n          resolve(\n            new Response(body, {\n              headers: responseHeaders,\n              status: responseStatusCode,\n            })\n          );\n\n          pipe(body);\n        },\n        onShellError(error: unknown) {\n          reject(error);\n        },\n        onError(error: unknown) {\n          responseStatusCode = 500;\n          // Log streaming rendering errors from inside the shell.  Don't log\n          // errors encountered during initial shell rendering since they'll\n          // reject and get logged in handleDocumentRequest.\n          if (shellRendered) {\n            console.error(error);\n          }\n        },\n      }\n    );\n\n    setTimeout(abort, ABORT_DELAY);\n  });\n}\n", "import { cssBundleHref } from \"@remix-run/css-bundle\";\nimport type { LinksFunction, LoaderArgs } from \"@remix-run/node\";\nimport { json } from \"@remix-run/node\";\nimport {\n  Link,\n  Links,\n  LiveReload,\n  Meta,\n  Outlet,\n  Scripts,\n  ScrollRestoration,\n  useLoaderData } from\n\"@remix-run/react\";\nimport { useEffect } from \"react\";\n\nimport { getUser } from \"~/session.server\";\nimport stylesheet from \"~/tailwind.css\";\nimport icon from \"../public/lighthouse.png\";\nimport { User } from \"./models/user.server\";\nimport initRum from \"./rum\";\n\nexport const links: LinksFunction = () => [\n{ rel: \"stylesheet\", href: stylesheet },\n...(cssBundleHref ? [{ rel: \"stylesheet\", href: cssBundleHref }] : []),\n// NOTE: Architect deploys the public directory to /_static/\n{ rel: \"icon\", href: \"/_static/favicon.ico\" }];\n\n\nexport const loader = async ({ request }: LoaderArgs) => {\n  return json({ user: await getUser(request) });\n};\n\nexport default function App() {\n  const data = useLoaderData<typeof loader>();\n\n  useEffect(() => {\n    if (process.env.NODE_ENV === \"production\") {\n      initRum().\n      then(() => console.log(\"RUM initialized\")).\n      catch((err) => console.error(\"Error initializing RUM\", err));\n    }\n  }, []);\n\n  return (\n    <html lang=\"en\" className=\"h-full\">\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n        <Meta />\n        <Links />\n      </head>\n      <body className=\"h-full\">\n        <Header user={(data.user as User)} />\n        <Outlet />\n        <ScrollRestoration />\n        <Scripts />\n        <LiveReload />\n      </body>\n    </html>);\n\n}\n\nfunction Header({ user }: {user: User | undefined;}) {\n  const isLoggedIn = !!user;\n  return (\n    <header className=\"bg-white\">\n      <nav\n        className=\"mx-auto flex max-w-7xl items-center justify-between p-6 lg:px-8\"\n        aria-label=\"Global\">\n\n        <div className=\"flex lg:flex-1\">\n          <a href=\"/\" className=\"-m-1.5 p-1.5\">\n            <span className=\"sr-only\">Lingua Lighthouse</span>\n            <img className=\"h-8 w-auto\" src={icon} alt=\"\" />\n          </a>\n        </div>\n\n        <Link\n          to=\"/about\"\n          className=\"text-sm font-semibold leading-6 text-gray-900\">\n\n          About\n        </Link>\n\n        <div className=\"gap-6 lg:flex lg:flex-1 lg:justify-end\">\n          {!isLoggedIn ?\n          <Link\n            to=\"/login\"\n            className=\"text-sm font-semibold leading-6 text-gray-900\">\n\n              Log in <span>&rarr;</span>\n            </Link> :\n\n          <Link\n            to=\"account\"\n            className=\"text-sm font-semibold leading-6 text-gray-900\">\n\n              Account\n            </Link>}\n\n        </div>\n      </nav>\n    </header>);\n\n}", "import { createCookieSessionStorage, redirect } from \"@remix-run/node\";\nimport invariant from \"tiny-invariant\";\n\nimport type { User } from \"~/models/user.server\";\nimport { getUserById } from \"~/models/user.server\";\n\ninvariant(process.env.SESSION_SECRET, \"SESSION_SECRET must be set\");\n\nexport const sessionStorage = createCookieSessionStorage({\n  cookie: {\n    name: \"__session\",\n    httpOnly: true,\n    path: \"/\",\n    sameSite: \"lax\",\n    secrets: [process.env.SESSION_SECRET],\n    secure: process.env.NODE_ENV === \"production\",\n  },\n});\n\nconst USER_SESSION_KEY = \"userId\";\n\nexport async function getSession(request: Request) {\n  const cookie = request.headers.get(\"Cookie\");\n  return sessionStorage.getSession(cookie);\n}\n\nexport async function isLoggedIn(request: Request) {\n  const session = await getSession(request);\n  return session.has(USER_SESSION_KEY);\n}\n\nexport async function getUserId(\n  request: Request\n): Promise<User[\"id\"] | undefined> {\n  const session = await getSession(request);\n  const userId = session.get(USER_SESSION_KEY);\n  return userId;\n}\n\nexport async function getUser(request: Request) {\n  const userId = await getUserId(request);\n  if (userId === undefined) return null;\n\n  const user = await getUserById(userId);\n  if (user) return user;\n\n  throw await logout(request);\n}\n\nexport async function requireUserId(\n  request: Request,\n  redirectTo: string = new URL(request.url).pathname\n) {\n  const userId = await getUserId(request);\n  if (!userId) {\n    const searchParams = new URLSearchParams([[\"redirectTo\", redirectTo]]);\n    throw redirect(`/login?${searchParams}`);\n  }\n  return userId;\n}\n\nexport async function requireUser(request: Request) {\n  const userId = await requireUserId(request);\n\n  const user = await getUserById(userId);\n  if (user) return user;\n\n  throw await logout(request);\n}\n\nexport async function createUserSession({\n  request,\n  userId,\n  remember,\n  redirectTo,\n}: {\n  request: Request;\n  userId: string;\n  remember: boolean;\n  redirectTo: string;\n}) {\n  const session = await getSession(request);\n  session.set(USER_SESSION_KEY, userId);\n  return redirect(redirectTo, {\n    headers: {\n      \"Set-Cookie\": await sessionStorage.commitSession(session, {\n        maxAge: remember\n          ? 60 * 60 * 24 * 7 // 7 days\n          : undefined,\n      }),\n    },\n  });\n}\n\nexport async function logout(request: Request) {\n  const session = await getSession(request);\n  return redirect(\"/\", {\n    headers: {\n      \"Set-Cookie\": await sessionStorage.destroySession(session),\n    },\n  });\n}\n", "import arc from \"@architect/functions\";\nimport bcrypt from \"bcryptjs\";\nimport invariant from \"tiny-invariant\";\n\nexport type User = { id: `email#${string}`; email: string };\nexport type Password = { password: string };\n\nexport async function getUserById(id: User[\"id\"]): Promise<User | null> {\n  const db = await arc.tables();\n  const result = await db.user.query({\n    KeyConditionExpression: \"pk = :pk\",\n    ExpressionAttributeValues: { \":pk\": id },\n  });\n\n  const [record] = result.Items;\n  if (record) return { id: record.pk, email: record.email };\n  return null;\n}\n\nexport async function getUserByEmail(email: User[\"email\"]) {\n  return getUserById(`email#${email}`);\n}\n\nasync function getUserPasswordByEmail(email: User[\"email\"]) {\n  const db = await arc.tables();\n  const result = await db.password.query({\n    KeyConditionExpression: \"pk = :pk\",\n    ExpressionAttributeValues: { \":pk\": `email#${email}` },\n  });\n\n  const [record] = result.Items;\n\n  if (record) return { hash: record.password };\n  return null;\n}\n\nexport async function createUser(\n  email: User[\"email\"],\n  password: Password[\"password\"]\n) {\n  const hashedPassword = await bcrypt.hash(password, 10);\n  const db = await arc.tables();\n  await db.password.put({\n    pk: `email#${email}`,\n    password: hashedPassword,\n  });\n\n  await db.user.put({\n    pk: `email#${email}`,\n    email,\n  });\n\n  const user = await getUserByEmail(email);\n  invariant(user, `User not found after being created. This should not happen`);\n\n  return user;\n}\n\nexport async function deleteUser(email: User[\"email\"]) {\n  const db = await arc.tables();\n  await db.password.delete({ pk: `email#${email}` });\n  await db.user.delete({ pk: `email#${email}` });\n}\n\nexport async function verifyLogin(\n  email: User[\"email\"],\n  password: Password[\"password\"]\n) {\n  const userPassword = await getUserPasswordByEmail(email);\n\n  if (!userPassword) {\n    return undefined;\n  }\n\n  const isValid = await bcrypt.compare(password, userPassword.hash);\n  if (!isValid) {\n    return undefined;\n  }\n\n  return getUserByEmail(email);\n}\n", "import arc from \"@architect/functions\";\nimport { LoaderArgs } from \"@remix-run/server-runtime\";\n\nimport { json } from \"react-router\";\nimport { createJob, getJobByChannelId } from \"~/models/job.server\";\n\nexport const loader = async ({ params, request }: LoaderArgs) => {\n  const { channelId, searchText } = params;\n  const job = await getJobByChannelId(channelId as string);\n\n  if (job) {\n    if (job.status === \"completed\") {\n      // const videos = await getVideosByChannelId(channelId as string);\n      // const results = await searchChannelFromDb(videos, searchText as string);\n      return json({ channelId, searchText, loading: false, job: job });\n    } else {\n      return json({ channelId, searchText, loading: true, job: job });\n    }\n  } else {\n    // create new job\n    const job = await createJob(channelId as string);\n    //fetch(`${domain}/api/jobs/run/${channelId}/`);\n\n    // send job to sqs\n    await arc.queues.publish({\n      name: \"jobHandler\",\n      payload: { channelId },\n    });\n    //console.log(\"Success\", data);\n    return json({ channelId, searchText, loading: true, job: job });\n  }\n};\n", "import arc from \"@architect/functions\";\nimport { createId } from \"@paralleldrive/cuid2\";\n\nexport type JobStatus =\n  | \"pending\"\n  | \"initializing\"\n  | \"searching\"\n  | \"processing\"\n  | \"completed\"\n  | \"failed\";\n\nexport type Job = {\n  id: string;\n  channelId: string;\n  status: JobStatus;\n  numVideosToProcess: number;\n  numVideosProcessed: number;\n\n  // expiration is the mechanism to recheck channels for new videos\n  TTL: number;\n};\n\n//const skToId = (sk: string): string => sk.replace(/^Job#/, \"\");\n//const idToSk = (id: string): string => `Job#${id}`;\n\nexport const createJob = async (channelId: string) => {\n  const db = await arc.tables();\n  const result = await db.job.put({\n    pk: channelId,\n    id: createId(),\n    status: \"pending\",\n    // expire in 1 day\n    TTL: Math.floor(Date.now() / 1000) + 60 * 60 * 24,\n    numVideosToProcess: 0,\n    numVideosProcessed: 0,\n  });\n  return result as Job;\n};\n\nexport const getJobByChannelId = async (\n  channelId: string\n): Promise<Job | undefined> => {\n  const db = await arc.tables();\n  const result = await db.job.query({\n    KeyConditionExpression: \"pk = :pk\",\n    ExpressionAttributeValues: { \":pk\": channelId },\n  });\n  const [record] = result.Items;\n  if (record) {\n    return {\n      id: record.pk,\n      channelId: record.channelId,\n      status: record.status,\n\n      numVideosProcessed: record.numVideosProcessed,\n      numVideosToProcess: record.numVideosToProcess,\n      TTL: record.TTL,\n    };\n  }\n};\n\nexport const updateJobStatus = async (\n  channelId: string,\n  status: JobStatus\n): Promise<void> => {\n  const db = await arc.tables();\n  await db.job.update({\n    Key: { pk: channelId },\n    UpdateExpression: \"set #status = :status\",\n    ExpressionAttributeNames: { \"#status\": \"status\" },\n    ExpressionAttributeValues: { \":status\": status },\n  });\n};\n\nexport const incrementNumProccessed = async (\n  channelId: string,\n  increment: number\n) => {\n  const db = await arc.tables();\n  const result = await db.job.update({\n    Key: { pk: channelId },\n    UpdateExpression: \"ADD #numVideosProcessed :increment\",\n    ExpressionAttributeNames: { \"#numVideosProcessed\": \"numVideosProcessed\" },\n    ExpressionAttributeValues: { \":increment\": increment },\n    ReturnValues: \"ALL_NEW\", // Optional, if you want to return the updated item\n  });\n  return result.Attributes as Job; // Use `Attributes` instead of casting to `Job`\n};\n\nexport const updateNumToProcess = async (\n  channelId: string,\n  numVideosToProcess: number\n): Promise<void> => {\n  const db = await arc.tables();\n  await db.job.update({\n    Key: { pk: channelId },\n    UpdateExpression: \"set #numVideosToProcess = :numVideosToProcess\",\n    ExpressionAttributeNames: { \"#numVideosToProcess\": \"numVideosToProcess\" },\n    ExpressionAttributeValues: { \":numVideosToProcess\": numVideosToProcess },\n  });\n};\n", "import { useFetcher, useLoaderData, useNavigate } from \"@remix-run/react\";\nimport { LoaderArgs } from \"@remix-run/server-runtime\";\nimport { useEffect, useState } from \"react\";\nimport TextTransition from \"react-text-transition\";\nimport { json } from \"react-router\";\nimport Spinner from \"~/components/Spinner\";\n\nexport const loader = async ({ params, request }: LoaderArgs) => {\n  const { channelId, searchText } = params;\n  return json({ channelId, searchText });\n};\n\nexport default function JobStatusPage() {\n  const navigate = useNavigate();\n  const fetcher = useFetcher<typeof loader>();\n  const { channelId, searchText } = useLoaderData<typeof loader>();\n  const [pageLoaded, setPageLoaded] = useState(false);\n  const [stats, setStats] = useState({\n    numVideosToProcess: 0,\n    numVideosProcessed: 0,\n  });\n\n  useEffect(() => {\n    setPageLoaded(true);\n  }, []);\n\n  // effect for loading new data\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const jobStatus = fetcher.data?.job?.status;\n      if (jobStatus === \"completed\") {\n        clearInterval(interval);\n        return navigate(`/channel/?channelId=${channelId}&text=${searchText}`);\n      }\n      fetcher.load(`/api/jobs/${channelId}/${searchText}`);\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [fetcher.data?.job?.status]);\n\n  // effect for incrementing the video stats by one from old value to new value\n  useEffect(() => {\n    const currentStats = {\n      numVideosToProcess: fetcher.data?.job?.numVideosToProcess || 0,\n      numVideosProcessed: fetcher.data?.job?.numVideosProcessed || 0,\n    };\n\n    const incrementInterval = setInterval(() => {\n      setStats((prevStats) => ({\n        numVideosToProcess:\n          prevStats.numVideosToProcess < currentStats.numVideosToProcess\n            ? prevStats.numVideosToProcess + 1\n            : currentStats.numVideosToProcess,\n        numVideosProcessed:\n          prevStats.numVideosProcessed < currentStats.numVideosProcessed\n            ? prevStats.numVideosProcessed + 1\n            : currentStats.numVideosProcessed,\n      }));\n    }, 10);\n\n    return () => clearInterval(incrementInterval);\n  }, [\n    fetcher.data?.job?.numVideosToProcess,\n    fetcher.data?.job?.numVideosProcessed,\n  ]);\n\n  return (\n    <div className=\"mx-6 flex h-[calc(100vh-80px)] flex-col items-center justify-center md:mx-0\">\n      <div className=\"mb-6 flex flex-row items-center justify-center gap-8\">\n        <div className=\"text-3xl font-bold\">Loading</div>\n        <Spinner />\n      </div>\n\n      <div className=\"flex flex-row gap-4\">\n        <div className=\"justif-start flex flex-col\">\n          <div className=\"text-2xl font-bold\">\n            {pageLoaded && (\n              <TextTransition>\n                {fetcher.data?.job?.status || \"pending\"}\n              </TextTransition>\n            )}\n          </div>\n          <div className=\"text-2xl font-bold\">\n            {pageLoaded && (\n              <TextTransition>\n                {formatNumber(stats.numVideosToProcess || 0)}\n              </TextTransition>\n            )}\n          </div>\n          <div className=\"text-2xl font-bold\">\n            {pageLoaded && (\n              <TextTransition>\n                {formatNumber(stats.numVideosProcessed || 0)}\n              </TextTransition>\n            )}\n          </div>\n        </div>\n        <div className=\"justif-start flex flex-col\">\n          <div className=\"text-2xl\">status</div>\n          <div className=\"text-2xl\">videos found</div>\n          <div className=\"text-2xl\">videos processed</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction formatNumber(num: number) {\n  return num.toLocaleString();\n}\n", "export default function Spinner() {\n  return (\n    <div\n      className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]\"\n      role=\"status\"\n    >\n      <span className=\"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]\">\n        Loading...\n      </span>\n    </div>\n  );\n}\n", "import { json, LoaderArgs } from \"@remix-run/node\";\nimport {\n  createChannel,\n  getChannelByChannelId,\n  updateChannel,\n} from \"~/models/channel.server\";\nimport { getJobByChannelId, updateJobStatus } from \"~/models/job.server\";\nimport { uploadFile, getVideoS3Key } from \"~/s3.server\";\nimport { getTranscript } from \"~/transcript.server\";\nimport {\n  getChannelData,\n  getChannelVideoCount,\n  getChannelVideosGen,\n} from \"~/youtube.server\";\nimport {\n  createVideo,\n  getVideosByChannelId as getVideosByChannelIdDb,\n} from \"../models/video.server\";\n\nexport const loader = async ({ params, request }: LoaderArgs) => {\n  const { channelId } = params;\n  const job = await getJobByChannelId(channelId as string);\n\n  if (!job) {\n    return json({ channelId, job: null, error: \"Job not found\" });\n  }\n\n  await updateJobStatus(job.id, \"initializing\");\n\n  let channel = await getChannelByChannelId(channelId as string);\n\n  if (!channel) {\n    const channelData = await getChannelData(channelId as string);\n    channel = await createChannel({\n      ...channelData,\n      numVideosProcessed: 0,\n    });\n  }\n\n  // check if we already have channel videos, and how many more we need to fetch\n  const numVideos = await getChannelVideoCount(channelId as string);\n  if (numVideos === channel.numVideosProcessed) {\n    await updateJobStatus(job.id, \"completed\");\n    return json({ channelId, job, error: null });\n  }\n\n  await updateJobStatus(job.id, \"searching\");\n\n  // let dbVideoIds: string[] = [];\n  // if (channel.numVideosProcessed > 0) {\n  //   const dbVideos = await getVideosByChannelIdDb(channelId as string);\n  //   dbVideoIds = dbVideos.map((v) => v.videoId);\n  // }\n\n  const existingVideoIds = await (\n    await getVideosByChannelIdDb(channelId as string)\n  ).map((v) => v.videoId);\n\n  // const channelVideos = await getChannelVideos(channelId as string);\n  // const chunkedVideos = chunk(channelVideos, 100);\n\n  await updateJobStatus(job.id, \"processing\");\n\n  const videoGenerator = getChannelVideosGen(channelId as string);\n\n  let numNoTranscript = 0;\n  let numProcessed = 0;\n  let numCreated = 0;\n  let index = 0;\n  for await (const chunk of videoGenerator) {\n    let shouldBreak = false;\n\n    const promises = chunk.map(async (video) => {\n      try {\n        if (existingVideoIds.includes(video.id)) {\n          shouldBreak = true;\n          return;\n        }\n\n        const transcript = await getTranscript(video.id);\n        const saveTranscript = uploadFile(\n          Buffer.from(JSON.stringify(transcript)),\n          getVideoS3Key(video.id)\n        );\n        const saveVideoObj = createVideo({\n          videoId: video.id,\n          title: video.title,\n          description: video.description,\n          publishedAt: video.publishedAt,\n          url: video.url,\n          channelId: video.channelId,\n          channelTitle: video.channelTitle,\n          thumbnailUrl: video.thumbnailUrl,\n        });\n        await Promise.all([saveTranscript, saveVideoObj]);\n        numCreated++;\n      } catch (e) {\n        console.log(e);\n\n        numNoTranscript++;\n      } finally {\n        numProcessed++;\n      }\n    });\n    console.log(\"Waiting for chunk \" + index + \" to finish...\");\n    await Promise.allSettled(promises);\n    index++;\n    //(job.id, numProcessed, numCreated, numNoTranscript);\n    if (shouldBreak) {\n      break;\n    }\n  }\n  console.log({ numProcessed, numCreated, numNoTranscript });\n  console.log({ channel });\n\n  await updateChannel({\n    ...channel,\n    numVideosProcessed: numProcessed,\n  });\n  await updateJobStatus(job.id, \"completed\");\n  return json({ channelId, job, error: null });\n};\n", "import arc from \"@architect/functions\";\nimport { createId } from \"@paralleldrive/cuid2\";\n\nexport type Channel = {\n  id: string;\n  channelId: string;\n  title: string;\n  description: string;\n  publishedAt: string;\n  numVideosProcessed: number;\n  thumbnailUrl: string;\n  url: string;\n};\n\n//const skToId = (sk: string): string => sk.replace(/^Channel#/, \"\");\n//const idToSk = (id: string): string => `Channel#${id}`;\n\nexport const createChannel = async (channel: Omit<Channel, \"id\">) => {\n  const db = await arc.tables();\n  const id = createId();\n  const result = await db.channel.put({\n    pk: channel.channelId,\n    sk: id,\n    id,\n    ...channel,\n  });\n  return result as Channel;\n};\n\nexport const updateChannel = async (channel: Channel) => {\n  const db = await arc.tables();\n  const result = await db.channel.update({\n    Key: {\n      pk: channel.channelId,\n      sk: channel.id,\n    },\n    UpdateExpression: `\n      SET\n        #title = :title,\n        #description = :description,  \n        #publishedAt = :publishedAt,\n        #numVideosProcessed = :numVideosProcessed,\n        #thumbnailUrl = :thumbnailUrl,\n        #url = :url\n    `,\n    ExpressionAttributeNames: {\n      \"#title\": \"title\",\n      \"#description\": \"description\",\n      \"#publishedAt\": \"publishedAt\",\n      \"#numVideosProcessed\": \"numVideosProcessed\",\n      \"#thumbnailUrl\": \"thumbnailUrl\",\n      \"#url\": \"url\",\n    },\n    ExpressionAttributeValues: {\n      \":title\": channel.title,\n      \":description\": channel.description,\n      \":publishedAt\": channel.publishedAt,\n      \":numVideosProcessed\": channel.numVideosProcessed,\n      \":thumbnailUrl\": channel.thumbnailUrl,\n      \":url\": channel.url,\n    },\n  });\n  return result as Channel;\n};\n\nexport const getChannelByChannelId = async (\n  channelId: string\n): Promise<Channel | undefined> => {\n  const db = await arc.tables();\n  const result = await db.channel.query({\n    KeyConditionExpression: \"pk = :pk\",\n    ExpressionAttributeValues: { \":pk\": channelId },\n  });\n  const [record] = result.Items;\n  if (record) {\n    return {\n      id: record.pk,\n      channelId: record.channelId,\n      title: record.title,\n      description: record.description,\n      publishedAt: record.publishedAt,\n      numVideosProcessed: record.numVideosProcessed,\n      thumbnailUrl: record.thumbnailUrl,\n      url: record.url,\n    };\n  }\n};\n\nexport const getChannels = async (): Promise<Channel[]> => {\n  const db = await arc.tables();\n  const result = await db.channel.scan({});\n  return result.Items.map((record) => ({\n    id: record.pk,\n    channelId: record.channelId,\n    title: record.title,\n    description: record.description,\n    publishedAt: record.publishedAt,\n    numVideosProcessed: record.numVideosProcessed,\n    thumbnailUrl: record.thumbnailUrl,\n    url: record.url,\n  }));\n};\n\nexport const incrementNumVideosProcessed = async (\n  channelId: string,\n  num: number\n): Promise<void> => {\n  const db = await arc.tables();\n  await db.channel.update({\n    Key: {\n      pk: channelId,\n      sk: \"Channel\",\n    },\n    UpdateExpression: \"ADD #numVideosProcessed :num\",\n    ExpressionAttributeNames: {\n      \"#numVideosProcessed\": \"numVideosProcessed\",\n    },\n    ExpressionAttributeValues: {\n      \":num\": num,\n    },\n  });\n};\n", "import {\n  GetObjectCommand,\n  PutObjectCommand,\n  S3Client,\n} from \"@aws-sdk/client-s3\";\n\nimport { TranscriptResponse } from \"youtube-transcript\";\n\nconst BUCKET_NAME = \"yt-search-transcript-segments\";\n\nconst s3 = new S3Client({\n  region: \"us-east-1\",\n  credentials: {\n    accessKeyId: process.env.S3_AWS_ACCESS_KEY_ID as string,\n    secretAccessKey: process.env.S3_AWS_SECRET_ACCESS_KEY as string,\n  },\n});\n\nexport async function getTranscriptS3(\n  videoId: string\n): Promise<TranscriptResponse[]> {\n  const key = getVideoS3Key(videoId);\n  return getFile(key);\n}\n\nexport async function uploadFile(file: Buffer, key: string) {\n  const command = new PutObjectCommand({\n    Bucket: BUCKET_NAME,\n    Key: key,\n    Body: file,\n  });\n  return s3.send(command);\n}\n\nexport async function getFile(key: string) {\n  const command = new GetObjectCommand({\n    Bucket: BUCKET_NAME,\n    Key: key,\n  });\n  const result = await s3.send(command);\n  const body = await result.Body!.transformToString();\n  return JSON.parse(body);\n}\n\nexport async function getFiles(keys: string[]) {\n  return Promise.all(keys.map((key) => getFile(key)));\n}\n\nexport function getVideoS3Key(videoId: string) {\n  return `video-${videoId}`;\n}\n", "import { TranscriptResponse, YoutubeTranscript } from \"youtube-transcript\";\n\nexport interface SearchResult {\n  matches: [];\n  numResults: number;\n  searchText: string;\n  video: {\n    id: string;\n    url: string;\n    publishedAt: Date;\n    title: string;\n    description: string;\n  };\n}\n\nexport interface TextSegment {\n  id: string;\n  iStart: number;\n  iEnd: number;\n  text: string;\n  originalText: string;\n  start: number;\n  duration: number;\n  textPreceding: string[];\n  textFollowing: string[];\n}\n\nexport interface TextMatch {\n  id: string;\n  precedingText: string;\n  exactText: string;\n  followingText: string;\n  startSeconds: number;\n  endSeconds: number;\n  startSecondsFormatted: string;\n}\n\nexport async function getTranscript(\n  videoId: string\n): Promise<TranscriptResponse[]> {\n  const transcript = await YoutubeTranscript.fetchTranscript(videoId, {\n    lang: \"en\",\n  });\n  return transcript;\n}\n\nexport function processTranscript(\n  rawSegments: TranscriptResponse[],\n  numBookends = 1\n) {\n  const segments: TextSegment[] = [];\n  let fullText = \"\";\n  let charIndex = 0;\n\n  rawSegments.forEach((segment, index) => {\n    let textPreceding: string[] = [];\n    let textFollowing: string[] = [];\n    // add space to preserve word boundaries\n    const text = segment.text + \" \";\n    const textLower = text.toLowerCase();\n    const iEnd = charIndex + text.length;\n\n    // add some text on either end of the matching text for context\n    if (index >= numBookends) {\n      const preceding = rawSegments.slice(index - numBookends, index);\n      textPreceding = preceding.map((s) => s.text);\n    }\n\n    if (index < rawSegments.length - numBookends) {\n      const following = rawSegments.slice(index + 1, index + numBookends + 1);\n      textFollowing = following.map((s) => s.text);\n    }\n\n    segments.push({\n      id: index.toString(),\n      text: textLower,\n      originalText: text,\n      duration: segment.duration / 1000,\n      start: segment.offset / 1000,\n      iStart: charIndex,\n      iEnd,\n      textPreceding,\n      textFollowing,\n    });\n\n    fullText += textLower;\n    charIndex = iEnd;\n  });\n\n  return { segments, fullText };\n}\n\nexport function searchTranscript(\n  fullText: string,\n  textSegments: TextSegment[],\n  searchText: string\n) {\n  const matches: TextMatch[] = [];\n  const indexes = getMatchedIndexes(fullText, searchText.toLowerCase());\n\n  let id = 0;\n  for (let [iStart, iEnd] of indexes) {\n    id += 1;\n    const matchingSegments: TextSegment[] = [];\n\n    for (const segment of textSegments) {\n      if (iStart === segment.iEnd) {\n        iStart += 1;\n      }\n\n      if (\n        (segment.iStart <= iStart && iStart <= segment.iEnd) ||\n        (segment.iStart <= iEnd && iEnd <= segment.iEnd)\n      ) {\n        matchingSegments.push(segment);\n      }\n    }\n    const match = buildMatch(id.toString(), searchText, matchingSegments);\n    matches.push(match);\n  }\n\n  // dedupe matches\n  return matches.filter(\n    (match, index, self) =>\n      index ===\n      self.findIndex(\n        (m) =>\n          m.precedingText === match.precedingText &&\n          m.followingText === match.followingText\n      )\n  );\n}\n\nfunction getMatchedIndexes(\n  text: string,\n  searchText: string\n): [number, number][] {\n  const regex = new RegExp(searchText, \"g\");\n  const matches = [];\n\n  let match;\n  while ((match = regex.exec(text)) !== null) {\n    matches.push(match);\n  }\n\n  return matches.map((m) => [m.index, m.index + m[0].length]);\n}\n\nfunction buildMatch(\n  id: string,\n  searchText: string,\n  segments: TextSegment[]\n): TextMatch {\n  const firstSegment = segments[0];\n  const lastSegment = segments[segments.length - 1];\n  const precedingText = firstSegment.textPreceding.join(\"\").trim();\n  const followingText = lastSegment.textFollowing.join(\"\").trim();\n  const mainTextLower = segments\n    .map((x) => x.text)\n    .join(\"\")\n    .trim();\n  const mainTextOriginal = segments\n    .map((x) => x.originalText)\n    .join(\"\")\n    .trim();\n  const fullText = `${precedingText} ${mainTextLower} ${followingText}`;\n  const fullTextOriginal = `${precedingText} ${mainTextOriginal} ${followingText}`;\n\n  // find indexes of the search text in the full text, with lowercase matching\n  const indexes = getMatchedIndexes(fullText, searchText.toLowerCase());\n\n  // split the text into preceding, exact matching, and following from\n  // the original text\n  const preceding = fullTextOriginal.substring(0, indexes[0][0]);\n  const exact = fullTextOriginal.substring(indexes[0][0], indexes[0][1]);\n  const following = fullTextOriginal.substring(indexes[0][1]);\n\n  return {\n    id,\n    precedingText: preceding.trim(),\n    exactText: exact.trim(),\n    followingText: following.trim(),\n\n    // add 2 second buffer as lead-in\n    startSeconds: Math.floor(firstSegment.start) - 2,\n    endSeconds: Math.floor(lastSegment.start + lastSegment.duration),\n    startSecondsFormatted: formatTime(firstSegment.start),\n  };\n}\n\nfunction formatTime(time: number): string {\n  const formatted: string = new Date(time * 1000).toISOString().substr(11, 8);\n  // remove milliseconds\n  return formatted.split(\".\")[0];\n}\n", "const MAX_RESULTS = 50;\nconst YOUTUBE_API_KEY = process.env.YOUTUBE_API_KEY;\n\nexport interface Video {\n  id: string;\n  channelId: string;\n  channelTitle: string;\n  title: string;\n  description: string;\n  publishedAt: string;\n  url: string;\n  thumbnailUrl: string;\n}\n\nexport async function getVideoById(videoId: string): Promise<Video> {\n  const url = `https://www.googleapis.com/youtube/v3/videos?part=snippet&id=${videoId}&key=${YOUTUBE_API_KEY}`;\n  const response = await fetch(url);\n  const data = await response.json();\n  const video = data.items[0];\n  return {\n    id: video.id,\n    channelId: video.snippet.channelId,\n    channelTitle: video.snippet.channelTitle,\n    title: video.snippet.title,\n    description: video.snippet.description,\n    publishedAt: video.snippet.publishedAt,\n    url: `https://www.youtube.com/watch?v=${video.id}`,\n    thumbnailUrl: video.snippet.thumbnails.high.url,\n  };\n}\n\nexport async function getVideosFromPlaylistId(\n  playlistId: string,\n  pageToken: string | undefined\n): Promise<{ videos: Video[]; nextPageToken: string | undefined }> {\n  let url = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=${MAX_RESULTS}&playlistId=${playlistId}&key=${YOUTUBE_API_KEY}`;\n  console.log(url);\n  if (pageToken) {\n    url += `&pageToken=${pageToken}`;\n  }\n\n  const response = await fetch(url);\n  const dataJson = await response.json();\n  const data = dataJson.items;\n  const videos: Video[] = data.map((item: any) => ({\n    id: item.snippet.resourceId.videoId,\n    channelId: item.snippet.channelId,\n    channelTitle: item.snippet.channelTitle,\n    title: item.snippet.title,\n    description: item.snippet.description,\n    publishedAt: item.snippet.publishedAt,\n    url: `https://www.youtube.com/watch?v=${item.snippet.resourceId.videoId}`,\n    thumbnailUrl: item.snippet.thumbnails.high.url,\n  }));\n  const nextPageToken = dataJson.nextPageToken as string | undefined;\n  return { videos, nextPageToken };\n}\n\nexport async function getChannelVideos(channelName: string) {\n  let response: { videos: any[]; nextPageToken: string | undefined };\n  let pageToken: string | undefined = undefined;\n  const channelVideos: Video[] = [];\n  const playlistId = channelName.replace(\"UC\", \"UU\");\n\n  while (true) {\n    response = await getVideosFromPlaylistId(playlistId, pageToken);\n    const { videos, nextPageToken } = response;\n    channelVideos.push(...videos);\n    pageToken = nextPageToken;\n    if (!nextPageToken) {\n      break;\n    }\n  }\n  return channelVideos;\n}\n\nexport async function* getChannelVideosGen(\n  channelName: string\n): AsyncGenerator<Video[]> {\n  let response: { videos: any[]; nextPageToken: string | undefined };\n  let pageToken: string | undefined = undefined;\n  const playlistId = channelName.replace(\"UC\", \"UU\");\n\n  while (true) {\n    response = await getVideosFromPlaylistId(playlistId, pageToken);\n    console.log({ response });\n    const { videos, nextPageToken } = response;\n    pageToken = nextPageToken;\n    yield videos;\n    if (!nextPageToken) {\n      break;\n    }\n  }\n}\n\nexport async function getChannelIdFromUrl(url: string) {\n  try {\n    const response = await fetch(url);\n    const data = await response.text();\n    const arr = data.split(\"channel_id=\");\n    const channelId = arr[1].slice(0, 24);\n\n    return channelId;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport async function getChannelVideoCount(channelId: string) {\n  const url = `https://www.googleapis.com/youtube/v3/channels?part=statistics&id=${channelId}&key=${YOUTUBE_API_KEY}`;\n  const response = await fetch(url);\n  const data = await response.json();\n  const videoCount = data.items[0].statistics.videoCount;\n  return videoCount;\n}\n\nexport async function getChannelData(channelId: string): Promise<{\n  channelId: string;\n  title: string;\n  description: string;\n  publishedAt: string;\n  thumbnailUrl: string;\n  url: string;\n}> {\n  const url = `https://www.googleapis.com/youtube/v3/channels?part=snippet&id=${channelId}&key=${YOUTUBE_API_KEY}`;\n  const response = await fetch(url);\n  const data = await response.json();\n  const channelData = data.items[0];\n  return {\n    channelId: channelData.id,\n    title: channelData.snippet.title,\n    description: channelData.snippet.description,\n    publishedAt: channelData.snippet.publishedAt,\n    thumbnailUrl: channelData.snippet.thumbnails.high.url,\n    url: `https://www.youtube.com/channel/${channelData.id}`,\n  };\n}\n", "import arc from \"@architect/functions\";\nimport { createId } from \"@paralleldrive/cuid2\";\n\nexport type Video = {\n  videoId: string;\n  channelId: string;\n  channelTitle: string;\n  title: string;\n  description: string;\n  publishedAt: string;\n  thumbnailUrl: string;\n  url: string;\n};\n\nconst skToId = (sk: string): string => sk.replace(/^Video#/, \"\");\n//const idToSk = (id: string): string => `Video#${id}`;\n\nexport const createVideo = async (video: Video): Promise<void> => {\n  const db = await arc.tables();\n  await db.video.put({\n    pk: video.videoId,\n    sk: skToId(createId()),\n    ...video,\n  });\n};\n\nexport const getVideoByVideoId = async (\n  videoId: string\n): Promise<Video | undefined> => {\n  const db = await arc.tables();\n  const result = await db.video.query({\n    KeyConditionExpression: \"pk = :pk\",\n    ExpressionAttributeValues: { \":pk\": videoId },\n  });\n  const [record] = result.Items;\n  if (record) {\n    return {\n      videoId: record.pk,\n      channelId: record.channelId,\n      channelTitle: record.channelTitle,\n      title: record.title,\n      description: record.description,\n      publishedAt: record.publishedAt,\n      thumbnailUrl: record.thumbnailUrl,\n      url: record.url,\n    };\n  }\n};\n\n// TODO: Dont use an index, use pk = channelId and sk = videoId\n// since we look up the video now and get the channelId\nexport const getVideosByChannelId = async (\n  channelId: string\n): Promise<Video[]> => {\n  const db = await arc.tables();\n  const result = await db.video.query({\n    IndexName: \"byChannelId\",\n    KeyConditionExpression: \"channelId = :cId\",\n    ExpressionAttributeValues: {\n      \":cId\": channelId,\n    },\n  });\n\n  return result.Items as Video[];\n};\n\nexport const countChannelVideos = async (channelId: string) => {\n  const db = await arc.tables();\n  const result = await db.video.query({\n    IndexName: \"byChannelId\",\n    KeyConditionExpression: \"channelId = :cId\",\n    ExpressionAttributeValues: {\n      \":cId\": channelId,\n    },\n    Select: \"COUNT\",\n  });\n\n  return result.Count;\n};\n", "import type { ActionArgs, LoaderArgs } from \"@remix-run/node\";\nimport { json, redirect } from \"@remix-run/node\";\nimport {\n  Form,\n  isRouteErrorResponse,\n  useLoaderData,\n  useRouteError,\n} from \"@remix-run/react\";\nimport invariant from \"tiny-invariant\";\n\nimport { deleteNote, getNote } from \"~/models/note.server\";\nimport { requireUserId } from \"~/session.server\";\n\nexport const loader = async ({ params, request }: LoaderArgs) => {\n  const userId = await requireUserId(request);\n  invariant(params.noteId, \"noteId not found\");\n\n  const note = await getNote({ id: params.noteId, userId });\n  if (!note) {\n    throw new Response(\"Not Found\", { status: 404 });\n  }\n  return json({ note });\n};\n\nexport const action = async ({ params, request }: ActionArgs) => {\n  const userId = await requireUserId(request);\n  invariant(params.noteId, \"noteId not found\");\n\n  await deleteNote({ id: params.noteId, userId });\n\n  return redirect(\"/notes\");\n};\n\nexport default function NoteDetailsPage() {\n  const data = useLoaderData<typeof loader>();\n\n  return (\n    <div>\n      <h3 className=\"text-2xl font-bold\">{data.note.title}</h3>\n      <p className=\"py-6\">{data.note.body}</p>\n      <hr className=\"my-4\" />\n      <Form method=\"post\">\n        <button\n          type=\"submit\"\n          className=\"rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 focus:bg-blue-400\"\n        >\n          Delete\n        </button>\n      </Form>\n    </div>\n  );\n}\n\nexport function ErrorBoundary() {\n  const error = useRouteError();\n\n  if (error instanceof Error) {\n    return <div>An unexpected error occurred: {error.message}</div>;\n  }\n\n  if (!isRouteErrorResponse(error)) {\n    return <h1>Unknown Error</h1>;\n  }\n\n  if (error.status === 404) {\n    return <div>Note not found</div>;\n  }\n\n  return <div>An unexpected error occurred: {error.statusText}</div>;\n}\n", "import arc from \"@architect/functions\";\nimport { createId } from \"@paralleldrive/cuid2\";\n\nimport type { User } from \"./user.server\";\n\nexport type Note = {\n  id: ReturnType<typeof createId>;\n  userId: User[\"id\"];\n  title: string;\n  body: string;\n};\n\ntype NoteItem = {\n  pk: User[\"id\"];\n  sk: `note#${Note[\"id\"]}`;\n};\n\nconst skToId = (sk: NoteItem[\"sk\"]): Note[\"id\"] => sk.replace(/^note#/, \"\");\nconst idToSk = (id: Note[\"id\"]): NoteItem[\"sk\"] => `note#${id}`;\n\nexport async function getNote({\n  id,\n  userId,\n}: Pick<Note, \"id\" | \"userId\">): Promise<Note | null> {\n  const db = await arc.tables();\n\n  const result = await db.note.get({ pk: userId, sk: idToSk(id) });\n\n  if (result) {\n    return {\n      userId: result.pk,\n      id: result.sk,\n      title: result.title,\n      body: result.body,\n    };\n  }\n  return null;\n}\n\nexport async function getNoteListItems({\n  userId,\n}: Pick<Note, \"userId\">): Promise<Array<Pick<Note, \"id\" | \"title\">>> {\n  const db = await arc.tables();\n\n  const result = await db.note.query({\n    KeyConditionExpression: \"pk = :pk\",\n    ExpressionAttributeValues: { \":pk\": userId },\n  });\n\n  return result.Items.map((n: any) => ({\n    title: n.title,\n    id: skToId(n.sk),\n  }));\n}\n\nexport async function createNote({\n  body,\n  title,\n  userId,\n}: Pick<Note, \"body\" | \"title\" | \"userId\">): Promise<Note> {\n  const db = await arc.tables();\n\n  const result = await db.note.put({\n    pk: userId,\n    sk: idToSk(createId()),\n    title: title,\n    body: body,\n  });\n  return {\n    id: skToId(result.sk),\n    userId: result.pk,\n    title: result.title,\n    body: result.body,\n  };\n}\n\nexport async function deleteNote({ id, userId }: Pick<Note, \"id\" | \"userId\">) {\n  const db = await arc.tables();\n  return db.note.delete({ pk: userId, sk: idToSk(id) });\n}\n", "import { Link } from \"@remix-run/react\";\n\nexport default function NoteIndexPage() {\n  return (\n    <p>\n      No note selected. Select a note on the left, or{\" \"}\n      <Link to=\"new\" className=\"text-blue-500 underline\">\n        create a new note.\n      </Link>\n    </p>\n  );\n}\n", "import type { ActionArgs } from \"@remix-run/node\";\nimport { json, redirect } from \"@remix-run/node\";\nimport { Form, useActionData } from \"@remix-run/react\";\nimport { useEffect, useRef } from \"react\";\n\nimport { createNote } from \"~/models/note.server\";\nimport { requireUserId } from \"~/session.server\";\n\nexport const action = async ({ request }: ActionArgs) => {\n  const userId = await requireUserId(request);\n\n  const formData = await request.formData();\n  const title = formData.get(\"title\");\n  const body = formData.get(\"body\");\n\n  if (typeof title !== \"string\" || title.length === 0) {\n    return json(\n      { errors: { body: null, title: \"Title is required\" } },\n      { status: 400 }\n    );\n  }\n\n  if (typeof body !== \"string\" || body.length === 0) {\n    return json(\n      { errors: { body: \"Body is required\", title: null } },\n      { status: 400 }\n    );\n  }\n\n  const note = await createNote({ body, title, userId });\n\n  return redirect(`/notes/${note.id}`);\n};\n\nexport default function NewNotePage() {\n  const actionData = useActionData<typeof action>();\n  const titleRef = useRef<HTMLInputElement>(null);\n  const bodyRef = useRef<HTMLTextAreaElement>(null);\n\n  useEffect(() => {\n    if (actionData?.errors?.title) {\n      titleRef.current?.focus();\n    } else if (actionData?.errors?.body) {\n      bodyRef.current?.focus();\n    }\n  }, [actionData]);\n\n  return (\n    <Form\n      method=\"post\"\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        gap: 8,\n        width: \"100%\",\n      }}\n    >\n      <div>\n        <label className=\"flex w-full flex-col gap-1\">\n          <span>Title: </span>\n          <input\n            ref={titleRef}\n            name=\"title\"\n            className=\"flex-1 rounded-md border-2 border-blue-500 px-3 text-lg leading-loose\"\n            aria-invalid={actionData?.errors?.title ? true : undefined}\n            aria-errormessage={\n              actionData?.errors?.title ? \"title-error\" : undefined\n            }\n          />\n        </label>\n        {actionData?.errors?.title ? (\n          <div className=\"pt-1 text-red-700\" id=\"title-error\">\n            {actionData.errors.title}\n          </div>\n        ) : null}\n      </div>\n\n      <div>\n        <label className=\"flex w-full flex-col gap-1\">\n          <span>Body: </span>\n          <textarea\n            ref={bodyRef}\n            name=\"body\"\n            rows={8}\n            className=\"w-full flex-1 rounded-md border-2 border-blue-500 px-3 py-2 text-lg leading-6\"\n            aria-invalid={actionData?.errors?.body ? true : undefined}\n            aria-errormessage={\n              actionData?.errors?.body ? \"body-error\" : undefined\n            }\n          />\n        </label>\n        {actionData?.errors?.body ? (\n          <div className=\"pt-1 text-red-700\" id=\"body-error\">\n            {actionData.errors.body}\n          </div>\n        ) : null}\n      </div>\n\n      <div className=\"text-right\">\n        <button\n          type=\"submit\"\n          className=\"rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 focus:bg-blue-400\"\n        >\n          Save\n        </button>\n      </div>\n    </Form>\n  );\n}\n", "import { json, LoaderArgs, redirect } from \"@remix-run/node\";\nimport { Link, useLoaderData } from \"@remix-run/react\";\nimport { Channel, getChannelByChannelId } from \"~/models/channel.server\";\nimport { getSearchesForUser, Search } from \"~/models/search.server\";\nimport { getVideoByVideoId, Video } from \"~/models/video.server\";\nimport { getUser } from \"~/session.server\";\nimport { formatDate } from \"~/utils\";\n\ntype EnrichedVideo = Video & { formattedDate: string };\ntype EnrichedChannel = Channel & { formattedDate: string };\n\ntype EnrichedSearch = Search & {\n  video?: EnrichedVideo;\n  channel?: EnrichedChannel;\n};\n\nexport const loader = async ({ request }: LoaderArgs) => {\n  const user = await getUser(request);\n  if (!user) return redirect(\"/login\");\n\n  const searches = (await getSearchesForUser(user.id)) || [];\n  const enrichedSearches = await Promise.all(\n    searches.map(async (s) => {\n      const formattedDate = formatDate(s.createdAt);\n      if (s.searchType === \"channel\") {\n        const channel = await getChannelByChannelId(s.resourceId);\n        return { ...s, channel: { ...channel, formattedDate } };\n      } else {\n        const video = await getVideoByVideoId(s.resourceId);\n        return { ...s, video: { ...video, formattedDate } };\n      }\n    })\n  );\n  return json({ searches: enrichedSearches });\n};\n\nexport default function AccountPage() {\n  const { searches } = useLoaderData<typeof loader>();\n  return (\n    <div className=\"mx-6 mt-6 flex h-[calc(100vh-80px)] flex-col\">\n      <div className=\"mb-6 text-xl font-bold\">Recent searches</div>\n      <div className=\"flex flex-row flex-wrap justify-evenly gap-4\">\n        <Searches searches={searches as EnrichedSearch[]} />\n      </div>\n    </div>\n  );\n}\n\nfunction Searches({ searches }: { searches: EnrichedSearch[] }) {\n  return (\n    <>\n      {searches.map((search) => {\n        if (search.searchType === \"channel\") {\n          return (\n            <ChannelSearch\n              key={`search-${search.id}`}\n              search={search as EnrichedSearch & { channel: EnrichedChannel }}\n            />\n          );\n        } else {\n          return (\n            <VideoSearch\n              key={`search-${search.id}`}\n              search={search as EnrichedSearch & { video: EnrichedVideo }}\n            />\n          );\n        }\n      })}\n    </>\n  );\n}\n\nfunction VideoSearch({\n  search,\n}: {\n  search: EnrichedSearch & { video: EnrichedVideo };\n}) {\n  const { video } = search;\n  return (\n    <Link to={`/video?id=${search.video.videoId}&text=${search.searchText}`}>\n      <div className=\"h-full max-w-sm rounded shadow-lg\">\n        <img\n          className=\"w-full\"\n          src={video.thumbnailUrl}\n          alt={`${video.title} thumbnail`}\n        />\n        <div className=\"px-6 py-4\">\n          <div className=\"mb-2 text-xl font-bold\">{video.title}</div>\n          <div className=\"mb-2 text-lg\">{video.channelTitle}</div>\n          <p className=\"text-base text-gray-700\">{video.description}</p>\n        </div>\n        <div className=\"flex flex-row justify-between px-6 pb-2 pt-4\">\n          <div className=\"mb-2 mr-2 inline-block rounded-full bg-gray-200 px-3 py-1 text-sm font-semibold text-gray-700\">\n            {search.searchText}\n          </div>\n          <div>{video.formattedDate}</div>\n        </div>\n      </div>\n    </Link>\n  );\n}\n\nfunction ChannelSearch({\n  search,\n}: {\n  search: EnrichedSearch & { channel: EnrichedChannel };\n}) {\n  const { channel } = search;\n  return (\n    <Link\n      to={`/channel?id=${search.channel.channelId}&text=${search.searchText}`}\n    >\n      <div className=\"h-full max-w-sm rounded shadow-lg\">\n        <img\n          className=\"w-full\"\n          src={channel.thumbnailUrl}\n          alt={`${channel.title} thumbnail`}\n        />\n        <div className=\"px-6 py-4\">\n          <div className=\"mb-2 text-xl font-bold\">{channel.title}</div>\n          <p className=\"text-base text-gray-700\">{channel.description}</p>\n        </div>\n        <div className=\"flex flex-row justify-between px-6 pb-2 pt-4\">\n          <div className=\"mb-2 mr-2 inline-block rounded-full bg-gray-200 px-3 py-1 text-sm font-semibold text-gray-700\">\n            {search.searchText}\n          </div>\n          <div>{channel.formattedDate}</div>\n        </div>\n      </div>\n    </Link>\n  );\n}\n", "import arc from \"@architect/functions\";\nimport { createId } from \"@paralleldrive/cuid2\";\n\nimport type { User } from \"./user.server\";\n\nexport type VideoId = string;\nexport type ChannelId = string;\nexport type SearchType = \"video\" | \"channel\";\n\nexport type Search = {\n  id: ReturnType<typeof createId>;\n  userId: User[\"id\"];\n  resourceId: VideoId | ChannelId;\n  searchText: string;\n  searchType: SearchType;\n  createdAt: string;\n};\n\ntype SearchItem = {\n  pk: User[\"id\"];\n  sk: `search#${Search[\"id\"]}`;\n};\n\nconst skToId = (sk: SearchItem[\"sk\"]): Search[\"id\"] =>\n  sk.replace(/^search#/, \"\");\nconst idToSk = (id: Search[\"id\"]): SearchItem[\"sk\"] => `search#${id}`;\n\nexport async function getSearch({\n  id,\n  userId,\n}: Pick<Search, \"id\" | \"userId\">): Promise<Search | null> {\n  const db = await arc.tables();\n\n  const result = await db.search.get({ pk: userId, sk: idToSk(id) });\n\n  if (result) {\n    return {\n      userId: result.pk,\n      id: result.sk,\n      resourceId: result.resourceId,\n      searchText: result.searchText,\n      searchType: result.searchType,\n      createdAt: result.createdAt,\n    };\n  }\n  return null;\n}\n\nexport async function getSearchesForUser(\n  userId: string\n): Promise<Array<Search>> {\n  const db = await arc.tables();\n\n  const result = await db.search.query({\n    KeyConditionExpression: \"pk = :pk\",\n    ExpressionAttributeValues: { \":pk\": userId },\n  });\n\n  return result.Items.map((n: any) => ({\n    searchText: n.searchText,\n    searchType: n.searchType,\n    id: skToId(n.sk),\n    userId: n.pk,\n    resourceId: n.resourceId,\n    createdAt: n.createdAt,\n  }));\n}\n\nexport async function createSearch({\n  searchText,\n  resourceId,\n  searchType,\n  userId,\n}: Pick<\n  Search,\n  \"searchText\" | \"userId\" | \"resourceId\" | \"searchType\"\n>): Promise<Search> {\n  const db = await arc.tables();\n\n  const id = createId();\n\n  const result = await db.search.put({\n    pk: userId,\n    sk: idToSk(id),\n    resourceId,\n    searchText,\n    searchType,\n    createdAt: new Date().toISOString(),\n  });\n  return {\n    userId: result.pk,\n    id: result.sk,\n    resourceId: result.resourceId,\n    searchText: result.searchText,\n    searchType: result.searchType,\n    createdAt: result.createdAt,\n  };\n}\n", "import { useMatches } from \"@remix-run/react\";\nimport { useMemo } from \"react\";\n\nimport type { User } from \"~/models/user.server\";\n\nconst DEFAULT_REDIRECT = \"/\";\n\n/**\n * This should be used any time the redirect path is user-provided\n * (Like the query string on our login/signup pages). This avoids\n * open-redirect vulnerabilities.\n * @param {string} to The redirect destination\n * @param {string} defaultRedirect The redirect to use if the to is unsafe.\n */\nexport function safeRedirect(\n  to: FormDataEntryValue | string | null | undefined,\n  defaultRedirect: string = DEFAULT_REDIRECT\n) {\n  if (!to || typeof to !== \"string\") {\n    return defaultRedirect;\n  }\n\n  if (!to.startsWith(\"/\") || to.startsWith(\"//\")) {\n    return defaultRedirect;\n  }\n\n  return to;\n}\n\n/**\n * This base hook is used in other hooks to quickly search for specific data\n * across all loader data using useMatches.\n * @param {string} id The route id\n * @returns {JSON|undefined} The router data or undefined if not found\n */\nexport function useMatchesData(\n  id: string\n): Record<string, unknown> | undefined {\n  const matchingRoutes = useMatches();\n  const route = useMemo(\n    () => matchingRoutes.find((route) => route.id === id),\n    [matchingRoutes, id]\n  );\n  return route?.data;\n}\n\nfunction isUser(user: any): user is User {\n  return user && typeof user === \"object\" && typeof user.email === \"string\";\n}\n\nexport function useOptionalUser(): User | undefined {\n  const data = useMatchesData(\"root\");\n  if (!data || !isUser(data.user)) {\n    return undefined;\n  }\n  return data.user;\n}\n\nexport function useUser(): User {\n  const maybeUser = useOptionalUser();\n  if (!maybeUser) {\n    throw new Error(\n      \"No user found in root loader, but user is required by useUser. If user is optional, try useOptionalUser instead.\"\n    );\n  }\n  return maybeUser;\n}\n\nexport function validateEmail(email: unknown): email is string {\n  return typeof email === \"string\" && email.length > 3 && email.includes(\"@\");\n}\n\n// display helpers\nexport function formatDate(date: Date | string) {\n  return new Date(date).toLocaleDateString(\"en-US\", {\n    month: \"long\",\n    day: \"numeric\",\n    year: \"numeric\",\n  });\n}\n\n// logic helpers\nexport function cleanVideoId(videoId: string) {\n  const segments = [\n    \"https://www.youtube.com/watch?v=\",\n    \"https://youtu.be/\",\n    \"https://www.youtube.com/embed/\",\n    \"https://m.youtube.com/watch?v=\",\n    \"?feature=sharea\",\n  ];\n\n  for (const segment of segments) {\n    if (videoId.includes(segment)) {\n      videoId = videoId.replace(segment, \"\");\n    }\n  }\n  return videoId;\n}\n", "import { json, LoaderArgs, redirect } from \"@remix-run/node\";\nimport { Link, useLoaderData } from \"@remix-run/react\";\nimport { getVideosByChannelId } from \"~/models/video.server\";\n\nimport { searchChannelFromDb } from \"~/search.server\";\nimport { TextMatch } from \"~/transcript.server\";\nimport { formatDate } from \"~/utils\";\nimport { getChannelIdFromUrl, Video } from \"~/youtube.server\";\n\nexport const loader = async ({ request }: LoaderArgs) => {\n  const params = new URL(request.url).searchParams;\n  const channelUrl = params.get(\"channelUrl\");\n  const channelId = params.get(\"channelId\");\n  const searchText = params.get(\"text\");\n\n  if (channelUrl) {\n    const channelId = await getChannelIdFromUrl(channelUrl);\n    return redirect(`/channel?channelId=${channelId}&text=${searchText}`);\n  }\n\n  const videos = await getVideosByChannelId(channelId as string);\n  const results = (await searchChannelFromDb(videos, searchText as string)).map(\n    (r) => {\n      return {\n        video: {\n          ...r.video,\n          formattedDate: formatDate(r.video.publishedAt),\n        },\n        matches: r.matches,\n      };\n    }\n  );\n\n  // sort results by date\n  const sortedResults = results.sort((a, b) => {\n    return (\n      new Date(b.video.publishedAt).getTime() -\n      new Date(a.video.publishedAt).getTime()\n    );\n  });\n\n  const channelName = videos[0]?.channelTitle || \"\";\n  return json({ channelId, channelName, searchText, results: sortedResults });\n};\n\nexport default function ChannelResultsPage() {\n  const { results, searchText, channelName } = useLoaderData<typeof loader>();\n\n  return (\n    <>\n      {results.length > 0 && (\n        <div className=\"ml-6 mt-6 text-2xl font-bold\">\n          {results[0].video?.channelTitle}\n        </div>\n      )}\n      <ResultsText\n        numResults={results.length}\n        searchText={searchText as string}\n        channelName={channelName as string}\n      />\n      <div className=\"flex h-screen flex-row flex-wrap justify-evenly gap-4\">\n        {results.map(({ video, matches }, index) => (\n          <Card\n            key={`video-card-${video.id}-${index}`}\n            video={video}\n            matches={matches}\n            searchText={searchText as string}\n          />\n        ))}\n      </div>\n    </>\n  );\n}\n\nfunction Card({\n  video,\n  matches,\n  searchText,\n}: {\n  video: Video & { formattedDate: string };\n  matches: TextMatch[];\n  searchText: string;\n}) {\n  const shortDescription = video.description.slice(0, 100);\n  const description =\n    shortDescription.length < video.description.length\n      ? `${shortDescription}...`\n      : shortDescription;\n\n  return (\n    <Link to={`/video?id=${video.id}&text=${searchText}`}>\n      <div className=\"h-full max-w-sm rounded shadow-lg\">\n        <img\n          className=\"w-full\"\n          src={video.thumbnailUrl}\n          alt=\"Sunset in the mountains\"\n        />\n        <div className=\"px-6 py-4\">\n          <div className=\"mb-2 text-xl font-bold\">{video.title}</div>\n          <p className=\"text-base text-gray-700\">{description}</p>\n        </div>\n        <div className=\"flex flex-row justify-between px-6 pb-2 pt-4\">\n          <div className=\"mb-2 mr-2 inline-block rounded-full bg-gray-200 px-3 py-1 text-sm font-semibold text-gray-700\">\n            {`${matches.length} matches`}\n          </div>\n          <div>{video.formattedDate}</div>\n        </div>\n      </div>\n    </Link>\n  );\n}\n\nfunction ResultsText({\n  numResults,\n  searchText,\n}: {\n  numResults: number;\n  searchText: string;\n  channelName: string;\n}) {\n  if (numResults > 0) {\n    return (\n      <h2 className=\"m-6 text-2xl underline\">\n        {numResults} results found for\n        <span className=\"font-bold italic\"> \"{searchText}\" </span>\n      </h2>\n    );\n  }\n  return (\n    <h2 className=\"m-6 text-2xl underline\">\n      No results found for\n      <span className=\"font-bold italic\"> \"{searchText}\" </span>\n    </h2>\n  );\n}\n", "import { chunk } from \"lodash\";\nimport {\n  getTranscript,\n  processTranscript,\n  searchTranscript,\n  TextMatch,\n} from \"./transcript.server\";\nimport {\n  createVideo,\n  Video as DbVideo,\n  getVideoByVideoId as getVideoByVideoIdDb,\n  getVideosByChannelId as getVideosByChannelIdDb,\n} from \"./models/video.server\";\nimport {\n  getChannelIdFromUrl,\n  getChannelVideoCount,\n  getChannelVideos,\n  getVideoById,\n  Video,\n} from \"./youtube.server\";\nimport { getTranscriptS3, getVideoS3Key, uploadFile } from \"./s3.server\";\nimport { TranscriptResponse } from \"youtube-transcript\";\n\nexport async function searchVideo(videoId: string, searchText: string) {\n  try {\n    const videoDb = await getVideoByVideoIdDb(videoId);\n\n    let video: Video, transcript: TranscriptResponse[];\n    if (videoDb) {\n      transcript = await getTranscriptS3(videoId);\n      video = {\n        id: videoDb.videoId,\n        ...videoDb,\n      };\n    } else {\n      video = await getVideoById(videoId);\n      transcript = await getTranscript(videoId);\n\n      const saveTranscript = uploadFile(\n        Buffer.from(JSON.stringify(transcript)),\n        getVideoS3Key(videoId)\n      );\n      const saveVideoObj = createVideo({\n        videoId,\n        title: video.title,\n        description: video.description,\n        publishedAt: video.publishedAt,\n        url: video.url,\n        channelId: video.channelId,\n        channelTitle: video.channelTitle,\n        thumbnailUrl: video.thumbnailUrl,\n      });\n      await Promise.all([saveTranscript, saveVideoObj]);\n    }\n\n    console.log(videoDb ? \"from db\" : \"from youtube\");\n    const { segments, fullText } = processTranscript(transcript);\n    const matches = searchTranscript(fullText, segments, searchText);\n    return { matches, video };\n  } catch (e) {\n    console.log(e);\n    return { matches: [], video: null };\n  }\n}\n\nexport async function searchChannel(channelUrl: string, searchText: string) {\n  let results: { video: Video; matches: TextMatch[] }[] = [];\n  const channelName = await getChannelIdFromUrl(channelUrl);\n\n  console.log({ channelName });\n\n  const [channelVideosDb, videoCount] = await Promise.all([\n    getVideosByChannelIdDb(channelName as string),\n    getChannelVideoCount(channelName as string),\n  ]);\n\n  const haveMostVideos = channelVideosDb.length > videoCount * 0.8;\n\n  if (haveMostVideos) {\n    // map videos to transcript files from S3 and return matches\n    results = await searchChannelFromDb(channelVideosDb, searchText);\n  } else {\n    // get videos from youtube and save to db\n    console.log(\"Getting channel videos...\");\n    const channelVideos = await getChannelVideos(channelName as string);\n    const chunkedVideos = chunk(channelVideos, 100);\n    console.log(channelVideos.length + \" videos found\");\n\n    console.log(\"Getting and processing transcripts...\");\n\n    let index = 0;\n    results = [];\n    for (const videoChunk of chunkedVideos) {\n      const promises = videoChunk.map(async (video) => {\n        try {\n          const transcript = await getTranscript(video.id);\n          const { segments, fullText } = processTranscript(transcript);\n          const saveTranscript = uploadFile(\n            Buffer.from(JSON.stringify(transcript)),\n            getVideoS3Key(video.id)\n          );\n          const saveVideoObj = createVideo({\n            videoId: video.id,\n            title: video.title,\n            description: video.description,\n            publishedAt: video.publishedAt,\n            url: video.url,\n            channelId: video.channelId,\n            channelTitle: video.channelTitle,\n            thumbnailUrl: video.thumbnailUrl,\n          });\n          await Promise.all([saveTranscript, saveVideoObj]);\n          results.push({\n            video,\n            matches: searchTranscript(fullText, segments, searchText),\n          });\n        } catch (e) {\n          console.log(e);\n        }\n      });\n      console.log(\"Waiting for chunk \" + index + \" to finish...\");\n      await Promise.all(promises);\n      index++;\n    }\n  }\n  console.log(channelVideosDb.length > 0 ? \"from db\" : \"from youtube\");\n  return results.filter((r) => r.matches.length > 0);\n}\n\nexport async function searchChannelFromDb(\n  channelVideosDb: DbVideo[],\n  searchText: string\n) {\n  let results: { video: Video; matches: TextMatch[] }[] = [];\n  const chunkedVideos = chunk(channelVideosDb, 100);\n\n  for (const videoChunk of chunkedVideos) {\n    const promises = videoChunk.map(async (video) => {\n      try {\n        const transcript = await getTranscriptS3OrYt(video.videoId);\n        const { segments, fullText } = processTranscript(transcript);\n        return {\n          video: {\n            id: video.videoId,\n            ...video,\n          },\n          matches: searchTranscript(fullText, segments, searchText),\n        };\n      } catch (e) {\n        console.log(e);\n        return {\n          video: {\n            id: video.videoId,\n            ...video,\n          },\n          matches: [],\n        };\n      }\n    });\n    results = results.concat(await Promise.all(promises));\n  }\n  return results.filter((r) => r.matches.length > 0);\n}\n\n// get transcript from s3. if not found, get from youtube and save to s3\nexport async function getTranscriptS3OrYt(videoId: string) {\n  try {\n    return await getTranscriptS3(videoId);\n  } catch (e) {\n    const transcript = await getTranscript(videoId);\n    await uploadFile(\n      Buffer.from(JSON.stringify(transcript)),\n      getVideoS3Key(videoId)\n    );\n    return transcript;\n  }\n}\n", "import { ActionArgs, json, redirect, V2_MetaFunction } from \"@remix-run/node\";\nimport { Form, Link, useActionData, useTransition } from \"@remix-run/react\";\nimport { useEffect, useState } from \"react\";\nimport TextTransition, { presets } from \"react-text-transition\";\nimport Spinner from \"~/components/Spinner\";\nimport { createSearch } from \"~/models/search.server\";\nimport { User } from \"~/models/user.server\";\nimport { getUser } from \"~/session.server\";\nimport { cleanVideoId, useOptionalUser } from \"~/utils\";\nimport { getChannelIdFromUrl } from \"~/youtube.server\";\n\nexport const meta: V2_MetaFunction = () => [{ title: \"Lingua Lighthouse\" }];\n\nexport const action = async ({ request }: ActionArgs) => {\n  const body = await request.formData();\n\n  let videoOrChannelUrl = body.get(\"videoUrl\");\n  const searchText = body.get(\"searchText\");\n  const searchType = body.get(\"searchType\");\n\n  if (!videoOrChannelUrl || !searchText || !searchType) {\n    return json({ error: \"Missing required fields\" }, { status: 400 });\n  }\n\n  const user = await getUser(request);\n\n  if (searchType === \"channel\") {\n    if (!user) {\n      return json(\n        { error: \"Must be logged in to search a channel\" },\n        { status: 400 }\n      );\n    }\n    const channelId = await getChannelIdFromUrl(videoOrChannelUrl as string);\n\n    if (!channelId) {\n      return json({ error: \"Invalid channel url\" }, { status: 400 });\n    }\n\n    await createSearch({\n      userId: user.id,\n      resourceId: channelId,\n      searchText: searchText as string,\n      searchType: \"channel\",\n    });\n    return redirect(`/jobs/${channelId}/${searchText}`);\n  }\n\n  if (user) {\n    videoOrChannelUrl = cleanVideoId(videoOrChannelUrl as string);\n    const s = await createSearch({\n      userId: user.id,\n      resourceId: videoOrChannelUrl as string,\n      searchText: searchText as string,\n      searchType: \"video\",\n    });\n    console.log({ s });\n  }\n\n  return redirect(`/${searchType}?id=${videoOrChannelUrl}&text=${searchText}`);\n};\n\nexport default function Index() {\n  const transition = useTransition();\n  const data = useActionData<typeof action>();\n  const user = useOptionalUser();\n  const [videoId, setVideoId] = useState(\"\");\n  const [text, setText] = useState(\"\");\n  const [searchType, setSearchType] = useState<\"video\" | \"channel\">(\"video\");\n  const [pageLoaded, setPageLoaded] = useState(false);\n\n  useEffect(() => {\n    setPageLoaded(true);\n  }, []);\n\n  const formValid = () => {\n    const inputsValid = videoId.length > 5 && text.length >= 3;\n\n    if (searchType === \"channel\") {\n      return Boolean(user) && inputsValid && transition.state === \"idle\";\n    }\n    return inputsValid && transition.state === \"idle\";\n  };\n\n  const isDisabled = !formValid();\n\n  return (\n    <div className=\"flex h-[calc(100vh-80px)] flex-col justify-around\">\n      <h1 className=\"inline text-center text-4xl\">\n        <span className=\"mr-2\">Search for text in a youtube</span>\n        {pageLoaded && (\n          <TextTransition springConfig={presets.stiff} inline>\n            {searchType}\n          </TextTransition>\n        )}\n      </h1>\n      <div className=\"flex justify-center px-4\">\n        <Form method=\"post\" className=\"flex w-full flex-col gap-y-4 md:w-3/4\">\n          <Warning user={user} searchType={searchType} />\n          {data?.error && <ErrorDisplay error={data.error} />}\n          <select\n            name=\"searchType\"\n            className=\"focus:shadow-outline w-full rounded border px-3 py-2 leading-tight text-gray-700 shadow focus:outline-none\"\n            onChange={(e) => setSearchType(e.target.value as any)}\n            value={searchType}\n          >\n            <option value=\"video\">Video</option>\n            <option value=\"channel\">Entire channel</option>\n          </select>\n\n          <Input\n            id=\"video_id\"\n            name=\"videoUrl\"\n            placeholder={`Youtube ${searchType} url`}\n            value={videoId}\n            onInput={(e: any) => setVideoId(e.target.value)}\n          />\n          <Input\n            id=\"text\"\n            name=\"searchText\"\n            placeholder=\"Text to search for\"\n            value={text}\n            onInput={(e: any) => setText(e.target.value)}\n          />\n          <button\n            disabled={isDisabled}\n            className={`focus:shadow-outline rounded ${\n              isDisabled ? \"bg-blue-100\" : \"bg-blue-500 hover:bg-blue-700\"\n            } px-4 py-2 font-bold text-white focus:outline-none`}\n            type=\"submit\"\n          >\n            {transition.state != \"idle\" ? <Spinner /> : \"Submit\"}\n          </button>\n        </Form>\n      </div>\n    </div>\n  );\n}\n\nfunction Input({\n  id,\n  name,\n  placeholder,\n  value,\n  onInput,\n}: {\n  id: string;\n  name: string;\n  placeholder: string;\n  value: string;\n  onInput: (e: any) => void;\n}) {\n  return (\n    <input\n      className=\"focus:shadow-outline w-full appearance-none rounded border px-3 py-2 leading-tight text-gray-700 shadow focus:outline-none\"\n      id={id}\n      name={name}\n      value={value}\n      type=\"text\"\n      placeholder={placeholder}\n      onInput={onInput}\n    />\n  );\n}\n\nfunction Warning({\n  user,\n  searchType,\n}: {\n  user: User | undefined;\n  searchType: string;\n}) {\n  if (searchType === \"channel\") {\n    if (user) {\n      // TODO: implement this\n      //return <ChannelSearchWarning />;\n    } else {\n      return <MustBeLoggedIn />;\n    }\n  }\n  return <></>;\n}\n\nfunction ErrorDisplay({ error }: { error: string }) {\n  return (\n    <div className=\"border-l-4 border-red-500 bg-red-100 p-4 text-red-700\">\n      <p className=\"font-bold\">Error: {error}</p>\n    </div>\n  );\n}\n\n// function ChannelSearchWarning() {\n//   return (\n//     <div className=\"flex flex-col gap-2\">\n//       <div className=\"border-l-4 border-yellow-500 bg-yellow-100 p-4 text-yellow-700\">\n//         <p className=\"font-bold\">\n//           Searching a whole channel may take a few minutes. Would you like to be\n//           notified when the search is complete?\n//         </p>\n//       </div>\n//       {/* radio buttons */}\n//       <div className=\"flex flex-col gap-2\">\n//         <label className=\"inline-flex items-center\">\n//           <input type=\"radio\" className=\"form-radio\" name=\"radio\" value=\"1\" />\n//           <span className=\"ml-2\">Yes, send me an email when it's complete</span>\n//         </label>\n//         <label className=\"inline-flex items-center\">\n//           <input type=\"radio\" className=\"form-radio\" name=\"radio\" value=\"2\" />\n//           <span className=\"ml-2\">No, I'll wait</span>\n//         </label>\n//       </div>\n//     </div>\n//   );\n// }\n\nfunction MustBeLoggedIn() {\n  return (\n    <div className=\"flex flex-col gap-2\">\n      <div className=\"border-l-4 border-yellow-500 bg-yellow-100 p-4\">\n        <p className=\"font-bold text-yellow-700\">\n          You must create an account and be logged in to search a whole channel.\n        </p>\n        <div className=\"mt-3\">\n          <Link className=\"font-bold underline\" to=\"login\">\n            Login\n          </Link>{\" \"}\n          or{\" \"}\n          <Link className=\"font-bold underline\" to=\"join\">\n            Sign up\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n", "import type { ActionArgs } from \"@remix-run/node\";\nimport { redirect } from \"@remix-run/node\";\n\nimport { logout } from \"~/session.server\";\n\nexport const action = async ({ request }: ActionArgs) => logout(request);\n\nexport const loader = async () => redirect(\"/\");\n", "export default function AboutPage() {\n  return (\n    <div className=\"mx-6 my-8 flex flex-col gap-4 pb-16\">\n      <p className=\"text-xl font-bold\">Welcome to Lingua Lighthouse!</p>\n\n      <p className=\"text-lg\">\n        At Lingua Lighthouse, we believe that language should never be a barrier\n        to accessing valuable content. Our web application is designed to\n        empower users like you to search for specific text spoken in YouTube\n        videos or entire channels effortlessly. Whether you're looking for a\n        particular phrase, a specific topic, or just trying to find relevant\n        information within a vast collection of videos, Lingua Lighthouse is\n        here to guide you.\n      </p>\n\n      <p className=\"text-lg\">\n        Our user-friendly interface allows you to enter either the channel URL\n        or video URL along with your desired search text. Once you hit search,\n        Lingua Lighthouse's advanced algorithms dive into the spoken content of\n        the videos, searching for your specified text. Our innovative technology\n        utilizes speech recognition and natural language processing techniques\n        to analyze the audio and transcribe it into searchable text. This way,\n        you can easily locate the exact moments in videos where your desired\n        text is spoken, saving you time and effort.\n      </p>\n\n      <p className=\"text-lg\">\n        Whether you're a student looking for specific information in educational\n        videos, a language learner trying to understand pronunciation and usage,\n        or a content creator searching for specific clips in your own videos,\n        Lingua Lighthouse is the perfect tool for you. We cater to a wide range\n        of users and offer a comprehensive solution to make your search process\n        seamless.\n      </p>\n\n      <p className=\"text-lg font-bold\">Key Features of Lingua Lighthouse:</p>\n\n      <ol className=\"list-decimal pl-8\">\n        <li className=\"text-lg\">\n          Efficient Search: Our powerful search engine scours through the spoken\n          content of YouTube videos, helping you find the information you need\n          quickly and accurately.\n        </li>\n        <li className=\"text-lg\">\n          Flexible Search Options: You have the flexibility to search either an\n          entire YouTube channel or a specific video. Simply provide the channel\n          URL or video URL along with your search text, and let Lingua\n          Lighthouse handle the rest.\n        </li>\n        <li className=\"text-lg\">\n          Precise Results: Lingua Lighthouse highlights the exact moments in\n          videos where your desired text is spoken, ensuring you find the\n          relevant information you're looking for with precision.\n        </li>\n        <li className=\"text-lg\">\n          User-Friendly Interface: Our intuitive interface makes it easy for\n          anyone to navigate and use the Lingua Lighthouse web application. You\n          don't need to be tech-savvy to access the valuable content you seek.\n        </li>\n        <li className=\"text-lg\">\n          Time-Saving: No more scrolling through lengthy videos or relying on\n          manual transcription. Lingua Lighthouse streamlines the search\n          process, saving you time and energy.\n        </li>\n      </ol>\n\n      <p className=\"text-lg\">\n        We at Lingua Lighthouse are passionate about breaking language barriers\n        and providing users with an effective tool to explore the vast world of\n        YouTube videos. We continuously strive to enhance our platform,\n        incorporating cutting-edge technologies to improve accuracy and expand\n        our features.\n      </p>\n\n      <p className=\"text-lg\">\n        Join us at Lingua Lighthouse and experience the power of effortless\n        searching within YouTube videos. Unlock a world of knowledge and\n        information by harnessing the potential of spoken language. Let us be\n        your guiding light as you navigate the vast sea of YouTube content.\n      </p>\n\n      <p className=\"text-lg font-bold\">\n        Start your search today and illuminate your language journey with Lingua\n        Lighthouse!\n      </p>\n    </div>\n  );\n}\n", "import type { ActionArgs, LoaderArgs, V2_MetaFunction } from \"@remix-run/node\";\nimport { json, redirect } from \"@remix-run/node\";\nimport { Form, Link, useActionData, useSearchParams } from \"@remix-run/react\";\nimport { useEffect, useRef } from \"react\";\n\nimport { verifyLogin } from \"~/models/user.server\";\nimport { createUserSession, getUserId } from \"~/session.server\";\nimport { safeRedirect, validateEmail } from \"~/utils\";\n\nexport const loader = async ({ request }: LoaderArgs) => {\n  const userId = await getUserId(request);\n  if (userId) return redirect(\"/\");\n  return json({});\n};\n\nexport const action = async ({ request }: ActionArgs) => {\n  const formData = await request.formData();\n  const email = formData.get(\"email\");\n  const password = formData.get(\"password\");\n  const redirectTo = safeRedirect(formData.get(\"redirectTo\"), \"/\");\n  const remember = formData.get(\"remember\");\n\n  if (!validateEmail(email)) {\n    return json(\n      { errors: { email: \"Email is invalid\", password: null } },\n      { status: 400 }\n    );\n  }\n\n  if (typeof password !== \"string\" || password.length === 0) {\n    return json(\n      { errors: { email: null, password: \"Password is required\" } },\n      { status: 400 }\n    );\n  }\n\n  if (password.length < 8) {\n    return json(\n      { errors: { email: null, password: \"Password is too short\" } },\n      { status: 400 }\n    );\n  }\n\n  const user = await verifyLogin(email, password);\n\n  if (!user) {\n    return json(\n      { errors: { email: \"Invalid email or password\", password: null } },\n      { status: 400 }\n    );\n  }\n\n  return createUserSession({\n    redirectTo,\n    remember: remember === \"on\" ? true : false,\n    request,\n    userId: user.id,\n  });\n};\n\nexport const meta: V2_MetaFunction = () => [{ title: \"Login\" }];\n\nexport default function LoginPage() {\n  const [searchParams] = useSearchParams();\n  const redirectTo = searchParams.get(\"redirectTo\") || \"/\";\n  const actionData = useActionData<typeof action>();\n  const emailRef = useRef<HTMLInputElement>(null);\n  const passwordRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (actionData?.errors?.email) {\n      emailRef.current?.focus();\n    } else if (actionData?.errors?.password) {\n      passwordRef.current?.focus();\n    }\n  }, [actionData]);\n\n  return (\n    <div className=\"flex h-[calc(100vh-80px)] flex-col justify-center\">\n      <div className=\"mx-auto w-full max-w-md px-8\">\n        <Form method=\"post\" className=\"space-y-6\">\n          <div>\n            <label\n              htmlFor=\"email\"\n              className=\"block text-sm font-medium text-gray-700\"\n            >\n              Email address\n            </label>\n            <div className=\"mt-1\">\n              <input\n                ref={emailRef}\n                id=\"email\"\n                required\n                autoFocus={true}\n                name=\"email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                aria-invalid={actionData?.errors?.email ? true : undefined}\n                aria-describedby=\"email-error\"\n                className=\"w-full rounded border border-gray-500 px-2 py-1 text-lg\"\n              />\n              {actionData?.errors?.email ? (\n                <div className=\"pt-1 text-red-700\" id=\"email-error\">\n                  {actionData.errors.email}\n                </div>\n              ) : null}\n            </div>\n          </div>\n\n          <div>\n            <label\n              htmlFor=\"password\"\n              className=\"block text-sm font-medium text-gray-700\"\n            >\n              Password\n            </label>\n            <div className=\"mt-1\">\n              <input\n                id=\"password\"\n                ref={passwordRef}\n                name=\"password\"\n                type=\"password\"\n                autoComplete=\"current-password\"\n                aria-invalid={actionData?.errors?.password ? true : undefined}\n                aria-describedby=\"password-error\"\n                className=\"w-full rounded border border-gray-500 px-2 py-1 text-lg\"\n              />\n              {actionData?.errors?.password ? (\n                <div className=\"pt-1 text-red-700\" id=\"password-error\">\n                  {actionData.errors.password}\n                </div>\n              ) : null}\n            </div>\n          </div>\n\n          <input type=\"hidden\" name=\"redirectTo\" value={redirectTo} />\n          <button\n            type=\"submit\"\n            className=\"w-full rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 focus:bg-blue-400\"\n          >\n            Log in\n          </button>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <input\n                id=\"remember\"\n                name=\"remember\"\n                type=\"checkbox\"\n                className=\"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n              />\n              <label\n                htmlFor=\"remember\"\n                className=\"ml-2 block text-sm text-gray-900\"\n              >\n                Remember me\n              </label>\n            </div>\n            <div className=\"text-center text-sm text-gray-500\">\n              Don't have an account?{\" \"}\n              <Link\n                className=\"text-blue-500 underline\"\n                to={{\n                  pathname: \"/join\",\n                  search: searchParams.toString(),\n                }}\n              >\n                Sign up\n              </Link>\n            </div>\n          </div>\n        </Form>\n      </div>\n    </div>\n  );\n}\n", "import type { LoaderArgs } from \"@remix-run/node\";\nimport { json } from \"@remix-run/node\";\nimport { Form, Link, NavLink, Outlet, useLoaderData } from \"@remix-run/react\";\n\nimport { getNoteListItems } from \"~/models/note.server\";\nimport { requireUserId } from \"~/session.server\";\nimport { useUser } from \"~/utils\";\n\nexport const loader = async ({ request }: LoaderArgs) => {\n  const userId = await requireUserId(request);\n  const noteListItems = await getNoteListItems({ userId });\n  return json({ noteListItems });\n};\n\nexport default function NotesPage() {\n  const data = useLoaderData<typeof loader>();\n  const user = useUser();\n\n  return (\n    <div className=\"flex h-full min-h-screen flex-col\">\n      <header className=\"flex items-center justify-between bg-slate-800 p-4 text-white\">\n        <h1 className=\"text-3xl font-bold\">\n          <Link to=\".\">Notes</Link>\n        </h1>\n        <p>{user.email}</p>\n        <Form action=\"/logout\" method=\"post\">\n          <button\n            type=\"submit\"\n            className=\"rounded bg-slate-600 px-4 py-2 text-blue-100 hover:bg-blue-500 active:bg-blue-600\"\n          >\n            Logout\n          </button>\n        </Form>\n      </header>\n\n      <main className=\"flex h-full bg-white\">\n        <div className=\"h-full w-80 border-r bg-gray-50\">\n          <Link to=\"new\" className=\"block p-4 text-xl text-blue-500\">\n            + New Note\n          </Link>\n\n          <hr />\n\n          {data.noteListItems.length === 0 ? (\n            <p className=\"p-4\">No notes yet</p>\n          ) : (\n            <ol>\n              {data.noteListItems.map((note) => (\n                <li key={note.id}>\n                  <NavLink\n                    className={({ isActive }) =>\n                      `block border-b p-4 text-xl ${isActive ? \"bg-white\" : \"\"}`\n                    }\n                    to={note.id}\n                  >\n                    \uD83D\uDCDD {note.title}\n                  </NavLink>\n                </li>\n              ))}\n            </ol>\n          )}\n        </div>\n\n        <div className=\"flex-1 p-6\">\n          <Outlet />\n        </div>\n      </main>\n    </div>\n  );\n}\n", "import { json, LoaderArgs } from \"@remix-run/node\";\nimport { useLoaderData } from \"@remix-run/react\";\nimport { memo, useContext, useEffect, useRef } from \"react\";\nimport VideoContainer from \"~/components/VideoContainer\";\nimport {\n  VideoContext,\n  VideoDispatchContext,\n  VideoProvider,\n} from \"~/context/videoContext\";\nimport useOnScreen from \"~/hooks/isInView\";\nimport { VideoActions } from \"~/reducers/video.reducer\";\nimport { searchVideo } from \"~/search.server\";\nimport { TextMatch } from \"~/transcript.server\";\nimport { cleanVideoId } from \"~/utils\";\n\nexport const loader = async ({ request }: LoaderArgs) => {\n  const params = new URL(request.url).searchParams;\n  let videoId = params.get(\"id\");\n  const searchText = params.get(\"text\");\n\n  if (!videoId || !searchText) {\n    return json({ video: null, searchText, matches: [], numResults: 0 });\n  }\n  videoId = cleanVideoId(videoId);\n\n  const { matches, video } = await searchVideo(\n    videoId as string,\n    searchText as string\n  );\n  return json({ video, searchText, matches, numResults: matches.length });\n};\n\nexport default function VideoResultsPage() {\n  const data = useLoaderData<typeof loader>();\n\n  return (\n    <VideoProvider matches={data.matches}>\n      <div className=\"flex h-[calc(100vh-80px)] flex-col gap-4\">\n        {data.video && (\n          <VideoContainer video={data.video} searchText={data.searchText} />\n        )}\n        <div className=\"overflow-y-scroll\">\n          <Matches />\n        </div>\n      </div>\n    </VideoProvider>\n  );\n}\n\nfunction Matches() {\n  const { matches, selected } = useContext(VideoContext);\n  const dispatch = useContext(VideoDispatchContext);\n  const setSelected = (m: TextMatch) =>\n    dispatch({ type: VideoActions.SET_SELECTED, payload: m });\n  return (\n    <div className=\"flex flex-col gap-4\">\n      {matches.map((match) => (\n        <MatchMemo\n          key={match.id}\n          match={match}\n          selected={selected}\n          setSelected={setSelected}\n        />\n      ))}\n    </div>\n  );\n}\n\nfunction Match({\n  match,\n  selected,\n  setSelected,\n}: {\n  match: TextMatch;\n  selected: TextMatch | undefined;\n  setSelected: (match: TextMatch) => void;\n}) {\n  const scrollToRef = useRef(null);\n  const isVisible = useOnScreen(scrollToRef);\n  const selectedClass =\n    selected?.id === match.id\n      ? \"bg-gray-400 hover:bg-gray-400\"\n      : \"bg-white hover:bg-gray-200\";\n\n  const clickHander = () => {\n    setSelected(match);\n  };\n\n  useEffect(() => {\n    if (!isVisible && selected?.id === match.id) {\n      // @ts-ignore\n      scrollToRef?.current?.scrollIntoView({\n        behavior: \"smooth\",\n      });\n    }\n  }, [selected]);\n  return (\n    <div\n      className={`w-full cursor-pointer overflow-hidden shadow-lg ${selectedClass}`}\n      onClick={clickHander}\n      ref={scrollToRef}\n    >\n      <div className=\"px-6 py-4\">\n        <p className=\"text-base italic text-gray-800\">\n          {' \"...'}\n          {match.precedingText}\n          <span className=\"font-bold\">{\" \" + match.exactText + \" \"}</span>\n          {match.followingText}\n          {'...\"'}\n        </p>\n        <p className=\"text-gray-500\">{match.startSecondsFormatted}</p>\n      </div>\n    </div>\n  );\n}\n\nconst MatchMemo = memo(Match);\n", "import skipIcon from \"../../public/skip-icon.svg\";\nimport { memo, useContext, useState } from \"react\";\nimport { VideoContext, VideoDispatchContext } from \"~/context/videoContext\";\nimport usePlaying from \"~/hooks/playingAll\";\nimport useResizeListener from \"~/hooks/screenSize\";\nimport { VideoActions } from \"~/reducers/video.reducer\";\n\nimport { Video } from \"~/youtube.server\";\nimport ProgressBar from \"./ProgressBar\";\nimport { YouTubeVideoMemo } from \"./YoutubeVideo\";\n\nexport default function VideoContainer({\n  video,\n  searchText,\n}: {\n  video: Video;\n  searchText: string;\n}) {\n  const { videoLoaded, matches } = useContext(VideoContext);\n  const [progressTime, setProgressTime] = useState(0);\n\n  usePlaying();\n  const isBigScreen = useResizeListener();\n\n  return (\n    <div className=\"grid grid-cols-1 gap-6 gap-y-10 md:grid-cols-2\">\n      {isBigScreen !== undefined && (\n        <div className=\"order-1\">\n          <YouTubeVideoMemo\n            videoId={video?.id as string}\n            isBigScreen={isBigScreen}\n            setProgressTime={setProgressTime}\n          />\n        </div>\n      )}\n      {videoLoaded && (\n        <div className=\"order-2 col-span-1 md:order-3 md:col-span-2\">\n          <ProgressBar progressTime={progressTime} />\n        </div>\n      )}\n      <div className=\"order-3 ml-6 md:order-2 md:ml-0\">\n        <AsideMemo\n          video={video}\n          numResults={matches.length}\n          searchText={searchText}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction Aside({\n  video,\n  numResults,\n  searchText,\n}: {\n  video: Video;\n  numResults: number;\n  searchText: string | undefined;\n}) {\n  return (\n    <div className=\"flex h-full flex-col justify-between md:px-3\">\n      <div className=\"flex flex-col gap-2\">\n        <div className=\"text-lg font-bold\">\n          {video.title || \"No video found\"}\n        </div>\n\n        <div className=\"text-lg font-bold\">{video.channelTitle}</div>\n        <ResultsText\n          numResults={numResults}\n          searchText={searchText as string}\n        />\n      </div>\n      <Controls />\n    </div>\n  );\n}\n\nconst AsideMemo = memo(Aside);\n\nfunction ResultsText({\n  numResults,\n  searchText,\n}: {\n  numResults: number;\n  searchText: string;\n}) {\n  if (numResults > 0) {\n    return (\n      <h2 className=\"text-md\">\n        {numResults} results found for\n        <span className=\"font-bold italic\"> \"{searchText}\" </span>\n      </h2>\n    );\n  }\n  return (\n    <h2 className=\"text-md\">\n      No results found for\n      <span className=\"font-bold italic\"> \"{searchText}\" </span>\n    </h2>\n  );\n}\n\nfunction Controls({}: {}) {\n  const { isPlayingAllMatches } = useContext(VideoContext);\n  const dispatch = useContext(VideoDispatchContext);\n\n  return (\n    <div className=\"flex flex-row items-center gap-6\">\n      <label className=\"relative mt-3 inline-flex cursor-pointer items-center md:mt-0\">\n        <input\n          type=\"checkbox\"\n          checked={isPlayingAllMatches}\n          onChange={(e) =>\n            dispatch({\n              type: e.target.checked\n                ? VideoActions.PLAY_ALL\n                : VideoActions.PLAY_ALL_STOP,\n            })\n          }\n          className=\"peer sr-only\"\n        />\n        <div className=\"flex flex-row items-center gap-3\">\n          <div className=\"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800\"></div>\n          <div className=\"text-sm font-medium text-gray-900\">\n            {isPlayingAllMatches ? \"Stop playing all\" : \"Play all\"}\n          </div>\n        </div>\n      </label>\n      <div\n        className=\"flex cursor-pointer flex-row items-center gap-3\"\n        onClick={() => dispatch({ type: VideoActions.PLAY_NEXT })}\n      >\n        <img className=\"w-10\" src={skipIcon} />\n        <span className=\"text-sm font-medium text-gray-900\">Play next</span>\n      </div>\n    </div>\n  );\n}\n", "import { createContext, useReducer } from \"react\";\nimport {\n  initialState as initialVideoState,\n  videoReducer,\n  VideoReducerAction,\n} from \"~/reducers/video.reducer\";\nimport { TextMatch } from \"~/transcript.server\";\n\nexport const VideoContext = createContext(initialVideoState);\nexport const VideoDispatchContext = createContext(\n  (() => {}) as React.Dispatch<VideoReducerAction>\n);\n\nexport const VideoProvider = ({\n  matches,\n  children,\n}: {\n  matches: TextMatch[];\n  children: React.ReactElement;\n}) => {\n  const [state, dispatch] = useReducer(videoReducer, {\n    ...initialVideoState,\n    matches,\n  });\n\n  return (\n    <VideoContext.Provider value={state}>\n      <VideoDispatchContext.Provider value={dispatch}>\n        {children}\n      </VideoDispatchContext.Provider>\n    </VideoContext.Provider>\n  );\n};\n", "import { Reducer } from \"react\";\nimport { TextMatch } from \"~/transcript.server\";\n\nexport const initialState = {\n  seekTime: 0,\n  duration: 0,\n  isPlaying: false,\n  isPlayingAllMatches: false,\n  videoLoaded: false,\n  matches: [] as TextMatch[],\n  selected: undefined as TextMatch | undefined,\n};\n\nexport enum VideoActions {\n  PLAY = \"PLAY\",\n  PAUSE = \"PAUSE\",\n  PLAY_ALL = \"PLAY_ALL\",\n  PLAY_ALL_STOP = \"PLAY_ALL_STOP\",\n  SET_SEEK_TIME = \"SET_SEEK_TIME\",\n  SET_DURATION = \"SET_DURATION\",\n  SET_VIDEO_LOADED = \"SET_VIDEO_LOADED\",\n  SET_MATCHES = \"SET_MATCHES\",\n  SET_SELECTED = \"SET_SELECTED\",\n  PLAY_NEXT = \"PLAY_NEXT\",\n}\n\nexport type PlayAction = {\n  type: VideoActions.PLAY;\n};\n\nexport type PauseAction = {\n  type: VideoActions.PAUSE;\n};\n\nexport type PlayAllAction = {\n  type: VideoActions.PLAY_ALL;\n};\n\nexport type PlayAllStopAction = {\n  type: VideoActions.PLAY_ALL_STOP;\n};\n\nexport type SetSeekTimeAction = {\n  type: VideoActions.SET_SEEK_TIME;\n  payload: number;\n};\n\nexport type SetDurationAction = {\n  type: VideoActions.SET_DURATION;\n  payload: number;\n};\n\nexport type SetVideoLoadedAction = {\n  type: VideoActions.SET_VIDEO_LOADED;\n};\n\nexport type SetMatchesAction = {\n  type: VideoActions.SET_MATCHES;\n  payload: TextMatch[];\n};\n\nexport type SetSelectedAction = {\n  type: VideoActions.SET_SELECTED;\n  payload: TextMatch;\n};\n\nexport type PlayNextAction = {\n  type: VideoActions.PLAY_NEXT;\n};\n\nexport type VideoReducerAction =\n  | PlayAction\n  | PauseAction\n  | PlayAllAction\n  | PlayAllStopAction\n  | SetSeekTimeAction\n  | SetDurationAction\n  | SetVideoLoadedAction\n  | SetMatchesAction\n  | SetSelectedAction\n  | PlayNextAction;\n\nexport const videoReducer: Reducer<typeof initialState, VideoReducerAction> = (\n  state,\n  action\n) => {\n  switch (action.type) {\n    case VideoActions.PLAY:\n      return { ...state, isPlaying: true };\n    case VideoActions.PAUSE:\n      return { ...state, isPlaying: false };\n    case VideoActions.PLAY_ALL:\n      return { ...state, isPlayingAllMatches: true };\n    case VideoActions.PLAY_ALL_STOP:\n      return { ...state, isPlayingAllMatches: false };\n    case VideoActions.SET_SEEK_TIME:\n      return { ...state, seekTime: action.payload };\n    case VideoActions.SET_DURATION:\n      return { ...state, duration: action.payload };\n    case VideoActions.SET_VIDEO_LOADED:\n      return { ...state, videoLoaded: true };\n    case VideoActions.SET_MATCHES:\n      return { ...state, matches: action.payload };\n    case VideoActions.SET_SELECTED:\n      return {\n        ...state,\n        selected: action.payload,\n        seekTime: action.payload.startSeconds,\n      };\n    case VideoActions.PLAY_NEXT:\n      const nextIndex =\n        state.matches.findIndex((m) => m === state.selected) + 1;\n      const selected = state.matches[nextIndex] ?? state.matches[0];\n      return {\n        ...state,\n        selected,\n        seekTime: selected.startSeconds ?? state.seekTime,\n      };\n\n    default:\n      return state;\n  }\n};\n", "import { useContext, useEffect } from \"react\";\nimport { VideoContext, VideoDispatchContext } from \"~/context/videoContext\";\nimport { VideoActions } from \"~/reducers/video.reducer\";\n\nexport default function usePlaying() {\n  const videoState = useContext(VideoContext);\n  const dispatch = useContext(VideoDispatchContext);\n  const { videoLoaded, isPlayingAllMatches, isPlaying, selected, matches } =\n    videoState;\n  useEffect(() => {\n    if (selected && isPlayingAllMatches && videoLoaded) {\n      dispatch({\n        type: VideoActions.SET_SEEK_TIME,\n        payload: selected.startSeconds,\n      });\n      if (!isPlaying) {\n        dispatch({ type: VideoActions.PLAY });\n      }\n\n      const timeToNext = selected.endSeconds - selected.startSeconds;\n      const timeout = setTimeout(() => {\n        // find the next match\n        const currentMatchIndex = matches.findIndex(\n          (match) => match.id === selected.id\n        );\n        const nextMatch = matches[currentMatchIndex + 1];\n\n        if (nextMatch) {\n          dispatch({ type: VideoActions.SET_SELECTED, payload: nextMatch });\n        } else {\n          dispatch({ type: VideoActions.PLAY_ALL_STOP });\n          dispatch({ type: VideoActions.PAUSE });\n        }\n      }, (timeToNext + 1) * 1000);\n\n      return () => clearTimeout(timeout);\n    }\n  }, [isPlayingAllMatches, selected, matches, videoLoaded]);\n}\n", "import { useEffect, useState } from \"react\";\nimport { BreakPoints } from \"~/constants\";\n\nconst useResizeListener = () => {\n  const [isBigScreen, setIsBigScreen] = useState(false);\n\n  useEffect(() => {\n    const setBigScreen = () =>\n      setIsBigScreen(window.innerWidth > BreakPoints.md);\n    setBigScreen();\n    window.addEventListener(\"resize\", setBigScreen);\n    return () => {\n      window.removeEventListener(\"resize\", setBigScreen);\n    };\n  }, []);\n\n  return isBigScreen;\n};\n\nexport default useResizeListener;\n", "// tailwind's breakpoints\nexport const BreakPoints = {\n  md: 768,\n  lg: 1024,\n};\n", "import { memo, useContext, useMemo } from \"react\";\nimport { VideoContext, VideoDispatchContext } from \"~/context/videoContext\";\nimport { VideoActions } from \"~/reducers/video.reducer\";\n\nexport default function ProgressBar({\n  progressTime,\n}: {\n  progressTime: number;\n}) {\n  const { duration, matches, selected } = useContext(VideoContext);\n  const dispatch = useContext(VideoDispatchContext);\n\n  const progressPercentage = useMemo(\n    () => Math.round((progressTime / duration) * 100),\n    [progressTime, duration]\n  );\n  return (\n    <div className=\"relative h-10\">\n      {matches.map((match) => {\n        const isSelected = match.id === selected?.id;\n\n        const breadcrumbPosition = useMemo(\n          () => Math.round((match.startSeconds / duration) * 100),\n          [match.startSeconds, duration]\n        );\n\n        const breadcrumbClick = useMemo(() => {\n          return () =>\n            dispatch({ type: VideoActions.SET_SELECTED, payload: match });\n        }, [match]);\n\n        return (\n          <BreadCrumb\n            key={match.id}\n            onClick={breadcrumbClick}\n            isSelected={isSelected}\n            position={breadcrumbPosition}\n            text={match.startSecondsFormatted}\n          />\n        );\n      })}\n      <Background />\n      <Progress percentage={progressPercentage} />\n    </div>\n  );\n}\n\nfunction Progress({ percentage }: { percentage: number }) {\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        bottom: 0,\n        left: 0,\n        width: `${percentage}%`,\n        height: \"100%\",\n        backgroundColor: \"#868E96\",\n        zIndex: 2,\n      }}\n    />\n  );\n}\n\nconst Background = memo(() => {\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        bottom: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\",\n        backgroundColor: \"#CED4DA\",\n      }}\n    />\n  );\n});\n\nconst BreadCrumb = memo(\n  ({\n    position,\n    text,\n    isSelected,\n    onClick,\n  }: {\n    position: number;\n    text: string;\n    isSelected: boolean;\n    onClick: () => void;\n  }) => {\n    return (\n      <div\n        style={{\n          position: \"absolute\",\n          bottom: 0,\n          left: `${position}%`,\n          height: \"100%\",\n          width: 30,\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      >\n        <div className=\"absolute z-10 h-full w-0.5 bg-black\" />\n        <Badge text={text} isSelected={isSelected} onClick={onClick} />\n      </div>\n    );\n  }\n);\n\nfunction Badge({\n  text,\n  isSelected,\n  onClick,\n}: {\n  text: string;\n  isSelected: boolean;\n  onClick: () => void;\n}) {\n  const opactityClass = isSelected\n    ? \"opacity-100\"\n    : \"hover:opacity-100 opacity-70\";\n  const zIndexClass = isSelected ? \"z-10\" : \"hover:z-10 z-1\";\n  const borderClass = isSelected\n    ? \"border-2 border-blue-600\"\n    : \"hover:border hover:border-blue-400\";\n  return (\n    <span\n      onClick={onClick}\n      className={`${opactityClass} ${zIndexClass} ${borderClass} duration mr-2 cursor-pointer rounded bg-blue-100 px-2.5 py-0.5 text-xs font-medium transition hover:bg-blue-200 hover:shadow-lg`}\n      style={{\n        //border: isSelected ? \"2px solid #2563EB\" : \"none\",\n        top: \"-26px\",\n        position: \"relative\",\n        left: \"-37px\",\n      }}\n    >\n      {text}\n    </span>\n  );\n}\n", "import { memo, useRef, useContext } from \"react\";\nimport YouTube, { YouTubeEvent } from \"react-youtube\";\nimport { VideoContext, VideoDispatchContext } from \"~/context/videoContext\";\nimport useEmitVideoProgress from \"~/hooks/emitVideoProgress\";\nimport { usePlayerControl, useSeekTo } from \"~/hooks/video\";\nimport { VideoActions } from \"~/reducers/video.reducer\";\n\nexport default function YouTubeVideo({\n  videoId,\n  isBigScreen,\n  setProgressTime,\n}: {\n  videoId: string;\n  isBigScreen: boolean;\n  setProgressTime: (t: number) => void;\n}) {\n  const playerRef = useRef(null);\n  const { isPlaying, seekTime } = useContext(VideoContext);\n  const dispatch = useContext(VideoDispatchContext);\n\n  usePlayerControl(isPlaying, playerRef);\n  useSeekTo(seekTime, playerRef);\n  useEmitVideoProgress(setProgressTime, playerRef);\n\n  const videoOpts = isBigScreen\n    ? {\n        width: \"100%\",\n        height: 300,\n      }\n    : {\n        height: 300,\n        width: \"100%\",\n      };\n\n  const onLoad = (e: YouTubeEvent<any>) => {\n    dispatch({ type: VideoActions.SET_VIDEO_LOADED });\n    dispatch({\n      type: VideoActions.SET_DURATION,\n      payload: e.target.getDuration(),\n    });\n  };\n\n  return videoId ? (\n    <YouTube\n      videoId={videoId}\n      opts={videoOpts}\n      ref={playerRef}\n      onPlay={() => dispatch({ type: VideoActions.PLAY })}\n      onPause={() => dispatch({ type: VideoActions.PAUSE })}\n      onReady={onLoad}\n    />\n  ) : (\n    <div></div>\n  );\n}\n\nexport const YouTubeVideoMemo = memo(YouTubeVideo);\n", "import { useEffect } from \"react\";\n\nexport default function useEmitVideoProgress(\n  setProgressTime: (t: number) => void,\n  playerRef: any\n) {\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (playerRef.current?.internalPlayer) {\n        playerRef.current.internalPlayer.getCurrentTime().then((t: number) => {\n          setProgressTime(t);\n        });\n      }\n    }, 300);\n    return () => clearInterval(interval);\n  }, [setProgressTime, playerRef?.current?.internalPlayer]);\n}\n", "import { useContext, useEffect } from \"react\";\nimport { VideoDispatchContext } from \"~/context/videoContext\";\nimport { VideoActions } from \"~/reducers/video.reducer\";\n\nexport function usePlayerControl(isPlaying: boolean, playerRef: any) {\n  const dispatch = useContext(VideoDispatchContext);\n\n  useEffect(() => {\n    // @ts-ignore\n    if (playerRef?.current?.internalPlayer) {\n      // @ts-ignore\n      if (isPlaying) {\n        // @ts-ignore\n        playerRef.current.internalPlayer.playVideo();\n      } else {\n        // @ts-ignore\n        playerRef.current.internalPlayer.pauseVideo();\n        dispatch({ type: VideoActions.PLAY_ALL_STOP });\n      }\n    }\n  }, [isPlaying, playerRef?.current?.internalPlayer]);\n}\n\nexport function useSeekTo(seekTime: number, playerRef: any) {\n  useEffect(() => {\n    // @ts-ignore\n    if (playerRef?.current?.internalPlayer) {\n      // @ts-ignore\n      playerRef.current.internalPlayer.seekTo(seekTime);\n    }\n  }, [seekTime, playerRef?.current?.internalPlayer]);\n}\n", "import { RefObject, useState, useEffect } from \"react\";\n\nexport default function useOnScreen(ref: RefObject<HTMLElement>) {\n  const [isIntersecting, setIntersecting] = useState(false);\n\n  useEffect(() => {\n    if (!ref.current) return;\n    const observer = new IntersectionObserver(([entry]) =>\n      setIntersecting(entry.isIntersecting)\n    );\n\n    observer.observe(ref.current as HTMLElement);\n    return () => observer.disconnect();\n  }, []);\n\n  return isIntersecting;\n}\n", "import type { ActionArgs, LoaderArgs, V2_MetaFunction } from \"@remix-run/node\";\nimport { json, redirect } from \"@remix-run/node\";\nimport { Form, Link, useActionData, useSearchParams } from \"@remix-run/react\";\nimport { useEffect, useRef } from \"react\";\n\nimport { createUser, getUserByEmail } from \"~/models/user.server\";\nimport { createUserSession, getUserId } from \"~/session.server\";\nimport { safeRedirect, validateEmail } from \"~/utils\";\n\nexport const loader = async ({ request }: LoaderArgs) => {\n  const userId = await getUserId(request);\n  if (userId) return redirect(\"/\");\n  return json({});\n};\n\nexport const action = async ({ request }: ActionArgs) => {\n  const formData = await request.formData();\n  const email = formData.get(\"email\");\n  const password = formData.get(\"password\");\n  const redirectTo = safeRedirect(formData.get(\"redirectTo\"), \"/\");\n\n  if (!validateEmail(email)) {\n    return json(\n      { errors: { email: \"Email is invalid\", password: null } },\n      { status: 400 }\n    );\n  }\n\n  if (typeof password !== \"string\" || password.length === 0) {\n    return json(\n      { errors: { email: null, password: \"Password is required\" } },\n      { status: 400 }\n    );\n  }\n\n  if (password.length < 8) {\n    return json(\n      { errors: { email: null, password: \"Password is too short\" } },\n      { status: 400 }\n    );\n  }\n\n  const existingUser = await getUserByEmail(email);\n  if (existingUser) {\n    return json(\n      {\n        errors: {\n          email: \"A user already exists with this email\",\n          password: null,\n        },\n      },\n      { status: 400 }\n    );\n  }\n\n  const user = await createUser(email, password);\n\n  return createUserSession({\n    redirectTo,\n    remember: false,\n    request,\n    userId: user.id,\n  });\n};\n\nexport const meta: V2_MetaFunction = () => [{ title: \"Sign Up\" }];\n\nexport default function Join() {\n  const [searchParams] = useSearchParams();\n  const redirectTo = searchParams.get(\"redirectTo\") ?? undefined;\n  const actionData = useActionData<typeof action>();\n  const emailRef = useRef<HTMLInputElement>(null);\n  const passwordRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (actionData?.errors?.email) {\n      emailRef.current?.focus();\n    } else if (actionData?.errors?.password) {\n      passwordRef.current?.focus();\n    }\n  }, [actionData]);\n\n  return (\n    <div className=\"flex h-[calc(100vh-80px)] flex-col justify-center\">\n      <div className=\"mx-auto w-full max-w-md px-8\">\n        <Form method=\"post\" className=\"space-y-6\">\n          <div>\n            <label\n              htmlFor=\"email\"\n              className=\"block text-sm font-medium text-gray-700\"\n            >\n              Email address\n            </label>\n            <div className=\"mt-1\">\n              <input\n                ref={emailRef}\n                id=\"email\"\n                required\n                autoFocus={true}\n                name=\"email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                aria-invalid={actionData?.errors?.email ? true : undefined}\n                aria-describedby=\"email-error\"\n                className=\"w-full rounded border border-gray-500 px-2 py-1 text-lg\"\n              />\n              {actionData?.errors?.email ? (\n                <div className=\"pt-1 text-red-700\" id=\"email-error\">\n                  {actionData.errors.email}\n                </div>\n              ) : null}\n            </div>\n          </div>\n\n          <div>\n            <label\n              htmlFor=\"password\"\n              className=\"block text-sm font-medium text-gray-700\"\n            >\n              Password\n            </label>\n            <div className=\"mt-1\">\n              <input\n                id=\"password\"\n                ref={passwordRef}\n                name=\"password\"\n                type=\"password\"\n                autoComplete=\"new-password\"\n                aria-invalid={actionData?.errors?.password ? true : undefined}\n                aria-describedby=\"password-error\"\n                className=\"w-full rounded border border-gray-500 px-2 py-1 text-lg\"\n              />\n              {actionData?.errors?.password ? (\n                <div className=\"pt-1 text-red-700\" id=\"password-error\">\n                  {actionData.errors.password}\n                </div>\n              ) : null}\n            </div>\n          </div>\n\n          <input type=\"hidden\" name=\"redirectTo\" value={redirectTo} />\n          <button\n            type=\"submit\"\n            className=\"w-full rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 focus:bg-blue-400\"\n          >\n            Create Account\n          </button>\n          <div className=\"flex items-center justify-center\">\n            <div className=\"text-center text-sm text-gray-500\">\n              Already have an account?{\" \"}\n              <Link\n                className=\"text-blue-500 underline\"\n                to={{\n                  pathname: \"/login\",\n                  search: searchParams.toString(),\n                }}\n              >\n                Log in\n              </Link>\n            </div>\n          </div>\n        </Form>\n      </div>\n    </div>\n  );\n}\n", "import type { ActionArgs } from \"@remix-run/node\";\nimport { redirect } from \"@remix-run/node\";\n\nimport { createUser } from \"~/models/user.server\";\nimport { createUserSession } from \"~/session.server\";\n\nexport const action = async ({ request }: ActionArgs) => {\n  if (process.env.NODE_ENV === \"production\") {\n    console.error(\n      \"\uD83D\uDEA8 \uD83D\uDEA8 \uD83D\uDEA8 \uD83D\uDEA8 \uD83D\uDEA8 \uD83D\uDEA8 \uD83D\uDEA8 \uD83D\uDEA8 test routes should not be enabled in production \uD83D\uDEA8 \uD83D\uDEA8 \uD83D\uDEA8 \uD83D\uDEA8 \uD83D\uDEA8 \uD83D\uDEA8 \uD83D\uDEA8 \uD83D\uDEA8\"\n    );\n    // test routes should not be enabled in production or without\n    // enable test routes... Just in case this somehow slips through\n    // we'll redirect :)\n    return redirect(\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\");\n  }\n\n  const { email } = await request.json();\n  if (!email) {\n    throw new Error(\"email required for login\");\n  }\n  if (!email.endsWith(\"@example.com\")) {\n    throw new Error(\"All test emails must end in @example.com\");\n  }\n\n  const user = await createUser(email, \"myreallystrongpassword\");\n\n  return createUserSession({\n    redirectTo: \"/\",\n    remember: true,\n    request,\n    userId: user.id,\n  });\n};\n\nexport default null;\n", "export default {'entry':{'module':'/_static/build/entry.client-CFLQUNBS.js','imports':['/_static/build/_shared/chunk-HZ7YOG5K.js','/_static/build/_shared/chunk-BVAIRN2W.js','/_static/build/_shared/chunk-6XW2KFLU.js','/_static/build/_shared/chunk-OV6IFOTW.js']},'routes':{'../cypress/support/test-routes/create-user':{'id':'../cypress/support/test-routes/create-user','parentId':'root','path':'__tests/create-user','index':undefined,'caseSensitive':undefined,'module':'/_static/build/_.._/cypress/support/test-routes/create-user-TJKEYJ3V.js','imports':undefined,'hasAction':true,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'root':{'id':'root','parentId':undefined,'path':'','index':undefined,'caseSensitive':undefined,'module':'/_static/build/root-ZM4JMQD4.js','imports':['/_static/build/_shared/chunk-C4CEVAJD.js','/_static/build/_shared/chunk-PKK3VIMV.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/_index':{'id':'routes/_index','parentId':'root','path':undefined,'index':true,'caseSensitive':undefined,'module':'/_static/build/routes/_index-OUEDFPKK.js','imports':['/_static/build/_shared/chunk-WRDFOSMI.js','/_static/build/_shared/chunk-YKKF5ZER.js','/_static/build/_shared/chunk-3D5JVG64.js','/_static/build/_shared/chunk-EHJOAG2U.js'],'hasAction':true,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/about':{'id':'routes/about','parentId':'root','path':'about','index':undefined,'caseSensitive':undefined,'module':'/_static/build/routes/about-XKE3UGE3.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/account':{'id':'routes/account','parentId':'root','path':'account','index':undefined,'caseSensitive':undefined,'module':'/_static/build/routes/account-BWTGAQRA.js','imports':['/_static/build/_shared/chunk-MFZ2L5YF.js','/_static/build/_shared/chunk-WRDFOSMI.js','/_static/build/_shared/chunk-3D5JVG64.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/api.jobs.$channelId.$searchText':{'id':'routes/api.jobs.$channelId.$searchText','parentId':'root','path':'api/jobs/:channelId/:searchText','index':undefined,'caseSensitive':undefined,'module':'/_static/build/routes/api.jobs.$channelId.$searchText-6XBOKVV5.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/api.jobs.run.$channelId':{'id':'routes/api.jobs.run.$channelId','parentId':'root','path':'api/jobs/run/:channelId','index':undefined,'caseSensitive':undefined,'module':'/_static/build/routes/api.jobs.run.$channelId-QBHCPXU3.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/channel':{'id':'routes/channel','parentId':'root','path':'channel','index':undefined,'caseSensitive':undefined,'module':'/_static/build/routes/channel-UWZHIMUW.js','imports':['/_static/build/_shared/chunk-MFZ2L5YF.js','/_static/build/_shared/chunk-YKKF5ZER.js','/_static/build/_shared/chunk-NANAMF6K.js','/_static/build/_shared/chunk-3D5JVG64.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/jobs.$channelId.$searchText':{'id':'routes/jobs.$channelId.$searchText','parentId':'root','path':'jobs/:channelId/:searchText','index':undefined,'caseSensitive':undefined,'module':'/_static/build/routes/jobs.$channelId.$searchText-QK4OV5UG.js','imports':['/_static/build/_shared/chunk-EHJOAG2U.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/join':{'id':'routes/join','parentId':'root','path':'join','index':undefined,'caseSensitive':undefined,'module':'/_static/build/routes/join-B2H3WHYG.js','imports':['/_static/build/_shared/chunk-VXOUHI5O.js','/_static/build/_shared/chunk-3D5JVG64.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/login':{'id':'routes/login','parentId':'root','path':'login','index':undefined,'caseSensitive':undefined,'module':'/_static/build/routes/login-3YT5T3CC.js','imports':['/_static/build/_shared/chunk-VXOUHI5O.js','/_static/build/_shared/chunk-3D5JVG64.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/logout':{'id':'routes/logout','parentId':'root','path':'logout','index':undefined,'caseSensitive':undefined,'module':'/_static/build/routes/logout-YHJIE5NB.js','imports':undefined,'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/notes':{'id':'routes/notes','parentId':'root','path':'notes','index':undefined,'caseSensitive':undefined,'module':'/_static/build/routes/notes-NMFPHYBL.js','imports':['/_static/build/_shared/chunk-3D5JVG64.js','/_static/build/_shared/chunk-U5SFILUK.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/notes.$noteId':{'id':'routes/notes.$noteId','parentId':'routes/notes','path':':noteId','index':undefined,'caseSensitive':undefined,'module':'/_static/build/routes/notes.$noteId-HL7IMVM2.js','imports':['/_static/build/_shared/chunk-C4CEVAJD.js','/_static/build/_shared/chunk-PKK3VIMV.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':true},'routes/notes._index':{'id':'routes/notes._index','parentId':'routes/notes','path':undefined,'index':true,'caseSensitive':undefined,'module':'/_static/build/routes/notes._index-HRZ3LIKE.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/notes.new':{'id':'routes/notes.new','parentId':'routes/notes','path':'new','index':undefined,'caseSensitive':undefined,'module':'/_static/build/routes/notes.new-C4NY4RJ3.js','imports':['/_static/build/_shared/chunk-C4CEVAJD.js','/_static/build/_shared/chunk-PKK3VIMV.js'],'hasAction':true,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/video':{'id':'routes/video','parentId':'root','path':'video','index':undefined,'caseSensitive':undefined,'module':'/_static/build/routes/video-4HXADFVM.js','imports':['/_static/build/_shared/chunk-NANAMF6K.js','/_static/build/_shared/chunk-3D5JVG64.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false}},'version':'16cd8c7c','hmr':undefined,'url':'/_static/build/manifest-16CD8C7C.js'};"],
  "mappings": "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",
  "names": ["cssBundleHref", "isbot", "import_node", "import_react", "import_node", "import_tiny_invariant", "arc", "bcrypt", "invariant", "bcrypt", "invariant", "import_jsx_dev_runtime", "loader", "import_functions", "import_functions", "arc", "loader", "job", "arc", "loader", "import_react", "import_react_router", "import_jsx_dev_runtime", "import_jsx_dev_runtime", "loader", "_a", "_b", "_c", "_d", "TextTransition", "loader", "import_node", "import_functions", "import_cuid2", "arc", "import_functions", "import_cuid2", "arc", "loader", "chunk", "loader", "import_node", "import_react", "import_tiny_invariant", "import_functions", "import_cuid2", "skToId", "arc", "import_jsx_dev_runtime", "loader", "invariant", "import_react", "import_jsx_dev_runtime", "action", "import_node", "import_react", "import_jsx_dev_runtime", "action", "_a", "_b", "_c", "_d", "loader", "import_node", "import_react", "import_functions", "import_cuid2", "skToId", "idToSk", "arc", "skToId", "idToSk", "import_react", "route", "import_jsx_dev_runtime", "loader", "loader", "import_node", "import_react", "import_jsx_dev_runtime", "loader", "channelId", "action", "import_node", "import_react", "import_react_text_transition", "import_jsx_dev_runtime", "action", "TextTransition", "action", "loader", "import_node", "action", "loader", "import_jsx_dev_runtime", "action", "loader", "meta", "import_node", "import_react", "import_jsx_dev_runtime", "loader", "action", "meta", "_a", "_b", "_c", "_d", "loader", "import_node", "import_react", "import_jsx_dev_runtime", "loader", "loader", "import_node", "import_react", "import_react", "import_react", "action", "import_jsx_dev_runtime", "import_react", "import_react", "import_react", "import_jsx_dev_runtime", "import_react", "import_react", "_a", "import_react", "_a", "import_jsx_dev_runtime", "YouTube", "import_jsx_dev_runtime", "ResultsText", "import_react", "entry", "import_jsx_dev_runtime", "loader", "action", "loader", "meta", "import_node", "import_react", "import_jsx_dev_runtime", "loader", "action", "meta", "_a", "_b", "_c", "_d", "action", "import_node", "action"]
}
